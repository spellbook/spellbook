this.Spellbook={},this.Spellbook.Globals={},this.Spellbook.Classes={},this.Spellbook.Helpers={},this.Spellbook.Services={},this.Spellbook.Inbox={},this.Spellbook.Classes.Base=function(){function t(t){this.options=t,"function"==typeof this.init&&this.init()}return t.prototype._settings={},t.prototype._setDefaults=function(t){return this._settings=$.extend(t,this.options)},t}(),this.Spellbook.Classes.Singleton=function(){function t(){}return t.prototype._instance=null,t.getInstance=function(){return null!=this._instance?this._instance:this._instance=function(t,e,s){s.prototype=t.prototype;var n=new s,r=t.apply(n,e);return Object(r)===r?r:n}(this,arguments,function(){})},t}(),this.Spellbook.Helpers.isBlank=function(t){return 0===t.trim().length?!0:!1},this.Spellbook.Helpers.keyCodes={enter:13,shift:16,ctrl:17,alt:18,esc:27,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,comma:188,slash:191,backslash:220,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},this.Spellbook.Helpers.randomizer=function(t){var e;return e=Math.floor(Math.random()*t.length),t[e]},this.Spellbook.Helpers.sanitize=function(t){return t.replace(/(<([^>]+)>)/gi,"")},this.Spellbook.Helpers.slugify=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},this.Spellbook.Helpers.uid=function(t){var e;for(null==t&&(t=10),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)};var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.AutoDuplicateInput=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._count=0,e.prototype._field=null,e.prototype._validators={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},e.prototype.init=function(){return this._setDefaults({$container:$(".js-autoDuplicateInput-container"),$element:$(".js-autoDuplicateInput"),classInvalid:"is-invalid",classValid:"is-valid",dataAttrCloned:"cloned",dataAttrValidate:"validate",onDuplicate:null,onInvalid:null,onValid:null}),this._setEventHandlers()},e.prototype.getCount=function(){return this._count},e.prototype._duplicate=function(){return++this._count,this._field.data(this._settings.dataAttrCloned,"true").clone(!0).appendTo(this._settings.$container).removeClass(this._settings.classValid).val("").data(this._settings.dataAttrCloned,"")},e.prototype._getValidationType=function(){return this._field.data(this._settings.dataAttrValidate)},e.prototype._isValid=function(){var t;return t=this._getValidationType(this._field),this._validators[""+t].test(this._field.val())},e.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n,r;return e.preventDefault(),t._field=$(e.currentTarget),t._isValid()?(t._setInputState("valid"),"function"==typeof(s=t._settings).onValid&&s.onValid(t._settings),"true"!==t._field.data("cloned")&&t._duplicate(),"function"==typeof(n=t._settings).onDuplicate?n.onDuplicate(t._settings,t._count):void 0):(t._setInputState("invalid"),"function"==typeof(r=t._settings).onInvalid?r.onInvalid(t._settings):void 0)}}(this))},e.prototype._setInputState=function(t){switch(t){case"invalid":return this._field.removeClass(this._settings.classValid).addClass(this._settings.classInvalid);case"valid":return this._field.removeClass(this._settings.classInvalid).addClass(this._settings.classValid)}},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.CharacterCounter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._count=0,e.prototype.init=function(){return this._setDefaults({$element:$(".js-characterCounter"),$label:$(".js-characterCounter-label"),$number:$(".js-characterCounter-number"),charsMax:140,charsMin:0,classError:"is-error",classSuccess:"is-success",onConditionsMet:null,onMaxExceeded:null,onMinPreceeded:null}),this._setEventHandlers()},e.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n,r,o;return e.preventDefault(),s=$(e.currentTarget),t._count=s.val().length,t._settings.$number.text(t._count),t._count>t._settings.charsMax?(t._toggleState(s,"error"),"function"==typeof(n=t._settings).onMaxExceeded?n.onMaxExceeded(t._settings):void 0):t._count<t._settings.charsMin?(t._toggleState(s,"error"),"function"==typeof(r=t._settings).onMinPreceeded?r.onMinPreceeded(t._settings):void 0):(t._toggleState(s,"success"),"function"==typeof(o=t._settings).onConditionsMet?o.onConditionsMet(t._settings):void 0)}}(this))},e.prototype._toggleState=function(t,e){switch(e){case"error":return t.removeClass(this._settings.classSuccess),this._settings.$label.removeClass(this._settings.classSuccess),t.addClass(this._settings.classError),this._settings.$label.addClass(this._settings.classError);case"success":return t.removeClass(this._settings.classError),this._settings.$label.removeClass(this._settings.classError),t.addClass(this._settings.classSuccess),this._settings.$label.addClass(this._settings.classSuccess)}},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.Dematerialize=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._item="",e.prototype.init=function(){return this._setDefaults({$element:$(".js-dematerialize"),$trigger:$(".js-dematerialize-trigger"),classHidden:"is-hidden",titleItem:"hidden_element"}),this._setEventHandlers(),this._setInitialState()},e.prototype._setEventHandlers=function(){return this._settings.$trigger instanceof jQuery?this._settings.$trigger.on("click",function(t){return function(e){return e.preventDefault(),t._toggleState()}}(this)):this._toggleStateViaKey()},e.prototype._setInitialState=function(){return this._item=localStorage.getItem(this._settings.titleItem),"true"!==this._item?this._settings.$element.removeClass(this._settings.classHidden):void 0},e.prototype._toggleState=function(){return this._settings.$element.hasClass(this._settings.classHidden)?(this._settings.$element.removeClass(this._settings.classHidden),this._item=localStorage.removeItem(this._settings.titleItem)):(this._settings.$element.addClass(this._settings.classHidden),this._item=localStorage.setItem(this._settings.titleItem,"true"))},e.prototype._toggleStateViaKey=function(){return $(document).on("keyup",function(t){return function(e){var s;switch(s=e.target.tagName.toLowerCase(),e.which){case t._settings.$trigger:if("input"!==s&&"textarea"!==s)return t._toggleState()}}}(this))},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.Dispatcher=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-dispatcher"),dataAttr:"dispatcher-page",events:[]}),this.dispatch()},e.prototype.dispatch=function(t){var e,s,n,r,o;if(null==t&&(t=null),n=this._getCurrentPage(),!n)return!1;if(null==t){for(r=this._settings.events,o=[],e=0,s=r.length;s>e;e++){switch(t=r[e],t.page){case n:t.run();break;case"all":t.run()}t.match&&n.match(t.match)?o.push(t.run()):o.push(void 0)}return o}switch(t.page){case n:return t.run();case"all":return t.run()}},e.prototype._getCurrentPage=function(){return this._settings.$element.data(this._settings.dataAttr)},e}(Spellbook.Classes.Base);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.DrawSvg=function(t){function e(){return this.draw=bind(this.draw,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._currentFrame=0,e.prototype._handle=0,e.prototype._lengths=[],e.prototype._paths=[],e.prototype._progress=0,e.prototype._totalFrames=60,e.prototype.init=function(){return this._setDefaults({$element:$(".js-drawSvg"),prefix:"path"}),this._setStorage()},e.prototype.draw=function(){return this._progress=this._currentFrame/this._totalFrames,this._progress>1?window.cancelAnimationFrame(this._handle):(this._currentFrame++,this._setStroke(),this._handle=window.requestAnimationFrame(this.draw))},e.prototype._setStorage=function(){var t,e,s,n,r,o;for(n=this._settings.$element.find("path[id]").length,o=[],e=t=0,r=n;r>=0?r>t:t>r;e=r>=0?++t:--t)this._paths[e]=document.getElementById(this._settings.prefix+"-"+e),s=this._paths[e].getTotalLength(),this._lengths[e]=s,this._paths[e].style.strokeDasharray=s+" "+s,o.push(this._paths[e].style.strokeDashoffset=s);return o},e.prototype._setStroke=function(){var t,e,s,n;for(n=[],e=t=0,s=this._paths.length;s>=0?s>t:t>s;e=s>=0?++t:--t)n.push(this._paths[e].style.strokeDashoffset=Math.floor(this._lengths[e]*(1-this._progress)));return n},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.EqualHeights=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._heights=[],e.prototype._timer=null,e.prototype.init=function(){return this._setDefaults({$element:$(".js-equalHeights")}),this._setHeight(),this._setEventHandlers()},e.prototype._setEventHandlers=function(){return $(window).on("resize",function(t){return function(){return clearTimeout(t._timer),t._timer=setTimeout(t._setHeight,250)}}(this))},e.prototype._setHeight=function(){var t;return this._settings.$element.css("height","auto"),this._settings.$element.each(function(t){return function(e,s){return t._heights.push($(s).height())}}(this)),t=Math.max.apply(Math,this._heights),this._settings.$element.css("height",t)},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.FormValidator=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._input=null,e.prototype._errors=[],e.prototype._validators=["required"],e.prototype.init=function(){return this._setDefaults({$element:$(".js-formValidator"),$input:$(".js-formValidator-input"),$submit:$(".js-formValidator-submit"),classError:"is-invalid",classMessage:"js-formValidator-message",dataAttr:"validate",delimiter:"|",isMessageShown:!0,onError:null,onSuccess:null}),this._setEventHandlers()},e.prototype.validate=function(t){var e,s,n,r,o;if(r=this._parseValidators(t.data(this._settings.dataAttr)),this._element=t,Array.isArray(r)){for(o=[],e=0,n=r.length;n>e;e++)s=r[e],o.push(this._matchValidators(s));return o}return this._matchValidators(r)},e.prototype._isValidator=function(t){return-1!==this._validators.indexOf(t)},e.prototype._matchValidators=function(t){switch(t){case"required":return this._validateRequired()?this._setValidationState("error","The field is required."):this._setValidationState("success")}},e.prototype._parseValidators=function(t){var e,s,n,r,o;if(r=[],o=t.split(this._settings.delimiter),o.length>1){for(e=0,s=o.length;s>e;e++)n=o[e],r.push(n);return r}return t},e.prototype._removeError=function(){var t;return t=this._errors.indexOf(this._input),this._errors.splice(t,1)},e.prototype._removeInputState=function(){return this._input.removeClass(this._settings.classError),this._settings.isMessageShown?this._input.next("."+this._settings.classMessage).remove():void 0},e.prototype._setError=function(t){return this._errors.push({element:this._input.attr("name"),message:t})},e.prototype._setEventHandlers=function(){return this._settings.$element.on("submit",function(t){return function(e){return t._validateAllFields()?void 0:e.preventDefault()}}(this)),this._settings.$input.on("keyup",function(t){return function(e){return t._input=$(e.currentTarget),t.validate(t._input)}}(this))},e.prototype._setInputState=function(t){return this._removeInputState(),this._input.addClass(this._settings.classError),this._settings.isMessageShown?this._input.after("<p class='"+this._settings.classMessage+"'>"+t+"</p>"):void 0},e.prototype._setValidationState=function(t,e){var s,n;switch(t){case"error":return this._setError(e),this._setInputState(e),"function"==typeof(s=this._settings).onError?s.onError(this._settings):void 0;case"success":return this._removeError(),this._removeInputState(),"function"==typeof(n=this._settings).onSuccess?n.onSuccess(this._settings):void 0}},e.prototype._validateAllFields=function(){return this._settings.$input.each(function(t){return function(e,s){return t._input=$(s),t.validate(t._input)}}(this)),0===this._errors.length?!0:!1},e.prototype._validateRequired=function(){return""===this._input.val()?!0:!1},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.HeadingLinks=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$("h1, h2, h3, h4, h5"),classAnchor:"anchor"}),this._addAnchors()},e.prototype._addAnchors=function(){return this._settings.$element.each(function(t){return function(e,s){var n,r;return n=$(s),r=t._slugify(n.text()),n.attr("id",r),n.prepend("<a class='"+t._settings.classAnchor+"' href='#"+r+"'>#</a>")}}(this))},e.prototype._slugify=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.KeyboardEvents=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({events:[]}),this.emit()},e.prototype.emit=function(t){var e,s,n,r;if(null==t&&(t=null),null==t){for(n=this._settings.events,r=[],e=0,s=n.length;s>e;e++)t=n[e],r.push(this._match(t));return r}return this._match(t)},e.prototype._getKeyCode=function(t){var e;return t=t||window.event,e=t.keyCode||t.which},e.prototype._match=function(t){return $(document).on("keyup",function(e){return function(s){var n;if(n=s.target.tagName.toLowerCase(),"input"!==n&&"textarea"!==n)switch(e._getKeyCode(s)){case t.key:return t.run()}}}(this))},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.LiveSearch=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._query="",e.prototype.init=function(){return this._setDefaults({$container:$(".js-search-container"),$element:$(".js-search"),$query:$(".js-search-query"),classHidden:"is-hidden",isEmptyMessageShown:!0,onClear:null,onEmpty:null,onFound:null,onKeyup:null,selectorEmpty:".js-search-empty",selectorItem:".js-search-item"}),this._setEventHandlers()},e.prototype._clearEmptyMessage=function(){return this._settings.isEmptyMessageShown&&$(this._settings.selectorEmpty).length>0?$(this._settings.selectorEmpty).remove():void 0},e.prototype._handleEmptyResults=function(){var t,e;return this._isEmpty()?(this._settings.isEmptyMessageShown&&(e=this._settings.selectorEmpty.replace(".","")),$("<p class='"+e+"'>\n  There are no results matching '"+this._query+"'.\n</p>").insertAfter(this._settings.$container),"function"==typeof(t=this._settings).onEmpty?t.onEmpty(this._settings):void 0):void 0},e.prototype._isEmpty=function(){return $(this._settings.selectorItem+"."+this._settings.classHidden).length===$(this._settings.selectorItem).length},e.prototype._isQueryAbsent=function(t){return t.text().search(new RegExp(this._query,"i"))<0},e.prototype._parseDom=function(){return this._settings.$query.each(function(t){return function(e,s){var n,r;return n=$(s),t._isQueryAbsent(n)?n.closest(t._settings.selectorItem).addClass(t._settings.classHidden):(n.closest(t._settings.selectorItem).removeClass(t._settings.classHidden),"function"==typeof(r=t._settings).onFound?r.onFound(t._settings):void 0)}}(this)),this._handleEmptyResults()},e.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n;return t._query=$(e.currentTarget).val(),"function"==typeof(s=t._settings).onKeyup&&s.onKeyup(t._settings),""===t._query&&($(t._settings.selectorItem).removeClass(t._settings.classHidden),t._clearEmptyMessage(),"function"==typeof(n=t._settings).onClear&&n.onClear(t._settings)),t._clearEmptyMessage(),t._parseDom()}}(this))},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.Modal=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._$modal=null,e.prototype._$backdrop=null,e.prototype.init=function(){return this._setDefaults({$close:$(".js-modal-close"),$trigger:$(".js-modal-trigger"),classActive:"is-active",classBackdrop:"modal-backdrop",classBodyActive:"is-modal-active",classInactive:"is-inactive",dataAttr:"modal"}),this._setEventHandlers()},e.prototype.trigger=function(t,e,s,n){switch(null==s&&(s=!1),null==n&&(n=null),this._$modal=t,e){case"open":t.addClass(this._settings.classActive),$("body").addClass(this._settings.classBodyActive);break;case"close":t.removeClass(this._settings.classActive),$("body").removeClass(this._settings.classBodyActive),this._cleanupEvents()}return s||this._toggleOverlay(e),"function"==typeof n&&n(),this._setActiveEventHandlers()},e.prototype._cleanupEvents=function(){return this._settings.$close.off("click"),$(document).off("keydown")},e.prototype._setActiveEventHandlers=function(){return this._settings.$close.on("click",function(t){return function(e){return e.preventDefault(),t.trigger(t._$modal,"close")}}(this)),this._$backdrop.on("click",function(t){return function(e){return t.trigger(t._$modal,"close")}}(this)),$(document).on("keydown",function(t){return function(e){switch(e.which){case 27:return t.trigger(t._$modal,"close")}}}(this))},e.prototype._setEventHandlers=function(){return this._settings.$trigger.on("click",function(t){return function(e){var s;return e.preventDefault(),s=$(e.currentTarget).data(t._settings.dataAttr),t._$modal=$(s),t.trigger(t._$modal,"open")}}(this))},e.prototype._toggleOverlay=function(t){switch(t){case"open":return $("<div class="+this._settings.classBackdrop+"></div>").appendTo($("body")),this._$backdrop=$("."+this._settings.classBackdrop),setTimeout(function(t){return function(){return t._$backdrop.addClass(t._settings.classActive)}}(this),25);case"close":return this._$backdrop.removeClass(this._settings.classActive),setTimeout(function(t){return function(){return t._$backdrop.remove()}}(this),500)}},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.QuantityInput=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype._value=null,e.prototype.init=function(){return this._setDefaults({$decrease:$(".js-quantityInput-decrease"),$element:$(".js-quantityInput"),$field:$(".js-quantityInput-field"),$increase:$(".js-quantityInput-increase"),$target:$(".js-quantityInput-target"),onDecrease:null,onIncrease:null,onTargetUpdate:null,valueBase:29,valueMax:100,valueMin:1,valuePrefix:"$"}),this._setValue(),this._setEventHandlers()},e.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){return t._setValue(),isNaN(t._value)||t._value<t._settings.valueMin||t._value>t._settings.valueMax?void 0:t._updateValue()}}(this)),this._settings.$increase.on("click",function(t){return function(e){var s;return e.preventDefault(),t._value>=t._settings.valueMax||t._updateValue("up"),"function"==typeof(s=t._settings).onIncrease?s.onIncrease(t._settings):void 0}}(this)),this._settings.$decrease.on("click",function(t){return function(e){var s;return e.preventDefault(),t._value<=t._settings.valueMin||t._updateValue("down"),"function"==typeof(s=t._settings).onDecrease?s.onDecrease(t._settings):void 0}}(this))},e.prototype._setValue=function(){return this._value=parseInt(this._settings.$element.val())},e.prototype._updateTarget=function(){var t;return t=this._value*this._settings.valueBase,this._settings.$target.text(""+this._settings.valuePrefix+t)},e.prototype._updateValue=function(t){var e;switch(null==t&&(t=""),t){case"up":this._settings.$element.val(++this._value);break;case"down":this._settings.$element.val(--this._value);break;default:this._settings.$element.val(this._value)}return this._updateTarget(),"function"==typeof(e=this._settings).onTargetUpdate?e.onTargetUpdate(this._settings):void 0},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.QueryParams=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.params={},e.prototype.variables=[],e.prototype.init=function(){return this._setDefaults({url:null}),this._parseQueryString(this._settings.url),this._sortParams()},e.prototype.allParams=function(){return this.params},e.prototype.matchParamKey=function(t){var e,s,n;s=this.params;for(e in s)if(n=s[e],t===e)return!0;return!1},e.prototype.matchParamValue=function(t){var e,s,n;s=this.params;for(e in s)if(n=s[e],t===n)return!0;return!1},e.prototype._parseQueryString=function(t){var e;return e=t?t.split("?")[1]:window.location.search.substring(1),this.variables=e.split("&")},e.prototype._sortParams=function(){var t,e,s,n,r,o;for(r=this.variables,o=[],t=0,e=r.length;e>t;t++)n=r[t],s=n.split("="),void 0!==s[1]?o.push(this.params[s[0]]=s[1]):o.push(void 0);return o},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.SaveProgress=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$container:$(".js-saveProgress-container"),$element:$(".js-saveProgress"),dataAttr:"saveprogress"}),this._restoreProgress(),this._setEventHandlers()},e.prototype._eraseProgress=function(t){return t.find(this._settings.$element).each(function(t){return function(e,s){var n;return n=$(s).data(t._settings.dataAttr),localStorage.removeItem(n)}}(this))},e.prototype._restoreProgress=function(){return this._settings.$element.each(function(t){return function(e,s){var n,r,o;return n=$(s),r=n.data(t._settings.dataAttr),o=localStorage.getItem(r),null!==o?n.val(o):void 0}}(this))},e.prototype._setEventHandlers=function(){return this._settings.$element.on("input",function(t){return function(e){var s,n,r;return s=$(e.currentTarget),n=s.data(t._settings.dataAttr),r=s.val(),t._storeProgress(n,r)}}(this)),this._settings.$container.on("submit",function(t){return function(e){return t._eraseProgress($(e.currentTarget))}}(this))},e.prototype._storeProgress=function(t,e){return localStorage.setItem(t,e)},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.SelectText=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-selectText"),onClick:null}),this._setEventHandlers()},e.prototype._selectElement=function(t){var e,s,n;return e=t[0],document.body.createTextRange?(s=document.body.createTextRange(),s.moveToElementText(e),s.select()):window.getSelection?(n=window.getSelection(),s=document.createRange(),s.selectNodeContents(e),n.removeAllRanges(),n.addRange(s)):void 0},e.prototype._setEventHandlers=function(){return this._settings.$element.on("click",function(t){return function(e){var s;return t._selectElement(t._settings.$element),$(e).trigger("focus").trigger("select"),"function"==typeof(s=t._settings).onClick?s.onClick(t._settings):void 0}}(this))},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.Share=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-share"),popup:{height:400,width:575,left:0,top:0}}),this._setEventHandlers()},e.prototype._setEventHandlers=function(){return this._settings.$element.on("click",function(t){return function(e){var s,n,r,o;return e.preventDefault(),s=$(e.currentTarget),o=s.attr("href"),r=s.data("share-service"),n=s.data("share-text"),t._triggerPopup(r,o,n)}}(this))},e.prototype._triggerPopup=function(t,e,s){var n;switch(n="width="+this._settings.popup.width+", height="+this._settings.popup.height+", top="+this._settings.popup.top+", left="+this._settings.popup.left,t){case"twitter":e="https://twitter.com/share?text="+s+"&url="+e;break;case"facebook":e="https://www.facebook.com/sharer/sharer.php?u="+e,t="facebook-share-dialog";break;case"google":e="https://plus.google.com/share?url="+e}return window.open(e,t,n)},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.ShowPassword=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$input:$(".js-showPassword-input"),$toggle:$(".js-showPassword-toggle"),showByDefault:!1}),this._setEventHandlers(),this._settings.showByDefault?this._showPassword():void 0},e.prototype._setEventHandlers=function(){return this._settings.$toggle.on("change",function(t){return function(e){var s;return s=$(e.currentTarget).prop("checked"),s?t._showPassword():t._settings.$input.attr("type","password")}}(this))},e.prototype._showPassword=function(){return this._settings.$input.attr("type","text"),this._settings.$toggle.prop("checked",!0)},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.StateUrls=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-stateUrls"),$link:$(".js-stateUrls-link"),hiddenClass:"is-hidden",activeClass:"is-active",dataAttribute:"state"}),this._setInitialState(this._getCurrentState()),this._setEventHandlers()},e.prototype._sanitizeHash=function(t){return t.replace(/(<([^>]+)>)/gi,"")},e.prototype._getCurrentState=function(){var t;return t=window.location.hash?this._sanitizeHash(window.location.hash):this._settings.$link.first().attr("href")},e.prototype._setInitialState=function(t){return this._settings.$element.not(t).addClass(this._settings.hiddenClass),$("[data-"+this._settings.dataAttribute+"="+t+"]").removeClass(this._settings.hiddenClass).addClass(this._settings.activeClass)},e.prototype._setEventHandlers=function(){return this._settings.$link.on("click",function(t){return function(e){var s,n;return e.preventDefault(),s=$(e.currentTarget),n=s.attr("href"),history.pushState?history.pushState(null,null,n):window.location.hash=n,$(n).length>0?t._showSection(s,n):void 0}}(this))},e.prototype._showSection=function(t,e){return this._settings.$link.removeClass(this._settings.activeClass),this._settings.$element.addClass(this._settings.hiddenClass),t.addClass(this._settings.activeClass),$(e).removeClass(this._settings.hiddenClass)},e}(Spellbook.Classes.Base);var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.Toggle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-toggle"),proximity:"next",event:"click",toggleClass:"is-hidden",activeClass:"is-active",initialState:null,onClick:null,onMouseover:null,onMouseout:null}),this._setEventHandlers()},e.prototype._setEventHandlers=function(){switch(this._settings.event){case"click":return this._handleClickEvent();case"hover":return this._handleHoverEvent()}},e.prototype._handleClickEvent=function(){return this._settings.$element.on("click",function(t){return function(e){var s,n;switch(e.preventDefault(),s=$(e.currentTarget),"function"==typeof(n=t._settings).onClick&&n.onClick(t._settings),t._settings.$element.toggleClass(t._settings.activeClass),t._settings.proximity){case"next":return s.next().toggleClass(t._settings.toggleClass);case"prev":return s.prev().toggleClass(t._settings.toggleClass);case"nextParent":return s.parent().next().toggleClass(t._settings.toggleClass);case"prevParent":return s.parent().prev().toggleClass(t._settings.toggleClass);default:return"object"==typeof t._settings.proximity?t._settings.proximity.toggleClass(t._settings.toggleClass):s.find(t._settings.proximity).toggleClass(t._settings.toggleClass)}}}(this))},e.prototype._handleHoverEvent=function(){return this._settings.initialState&&this._settings.initialState(this._settings),this._settings.$element.on({mouseenter:function(t){return function(e){return t._handleHoverStateEvent($(e.currentTarget),"on")}}(this),mouseleave:function(t){return function(e){return t._handleHoverStateEvent($(e.currentTarget),"off")}}(this)})},e.prototype._handleHoverStateEvent=function(t,e){var s,n;switch(e){case"on":"function"==typeof(s=this._settings).onMouseover&&s.onMouseover(this._settings),
t.addClass(this._settings.activeClass);break;case"off":"function"==typeof(n=this._settings).onMouseout&&n.onMouseout(this._settings),t.removeClass(this._settings.activeClass)}switch(this._settings.proximity){case"next":return this._toggleClass(t.next());case"prev":return this._toggleClass(t.prev());case"nextParent":return this._toggleClass(t.parent().next());case"prevParent":return this._toggleClass(t.parent().prev());default:return"object"==typeof this._settings.proximity?this._toggleClass(this._settings.proximity):this._toggleClass(t.find(this._settings.proximity))}},e.prototype._toggleClass=function(t,e){return null==e&&(e=this._settings.toggleClass),t.hasClass(e)?t.removeClass(e):t.addClass(e)},e}(Spellbook.Classes.Base),this.Spellbook.Services.autoSubmit=function(t){var e;return e=$.extend({$element:$(".js-autoSubmit")},t),e.$element.on("change",function(){return $(this).closest("form").trigger("submit")})},this.Spellbook.Services.clickOut=function(t){var e;return e=$.extend({$element:$(".js-clickout"),run:null},t),$(document).on("click",function(){return e.run()}),e.$element.on("click",function(t){return t.stopPropagation()})},this.Spellbook.Services.contextMenu=function(t){var e;return e=$.extend({$element:$(".js-contextMenu"),activeClass:"is-active"},t),$(document).on("contextmenu",function(t){return t.preventDefault(),e.$element.css({top:t.pageY+"px",left:t.pageX+"px"}).addClass(e.activeClass)}),$(document).on("click",function(t){return e.$element.removeClass(e.activeClass)})},this.Spellbook.Services.escapeOut=function(t){var e;return e=$.extend({run:null},t),$(document).on("keyup",function(t){switch(t.which){case 27:return e.run()}})},this.Spellbook.Services.filter=function(t){var e;return e=$.extend({$element:$(".js-filter"),$item:$(".js-filter-item"),$link:$(".js-filter-link"),$empty:$("<p>There are no items to show.</p>"),activeClass:"is-active",hiddenClass:"is-hidden",dataAttribute:"item"},t),e.$link.on("click",function(t){var s,n,r;return t.preventDefault(),s=$(this),r=s.attr("href").split("#")[1],e.$link.removeClass(e.activeClass),s.toggleClass(e.activeClass),"all"!==r?(e.$item.addClass(e.hiddenClass),n=$("[data-"+e.dataAttribute+"="+r+"]"),n.length>0?n.removeClass(e.hiddenClass):e.$element.append(e.$empty)):e.$item.removeClass(e.hiddenClass)})},this.Spellbook.Services.fixOrphanWords=function(t){var e;return e=$.extend({$element:$(".js-orphan")},t),e.$element.each(function(){var t,e,s,n,r,o;for(t=$(this),o=t.text().split(" "),e="",s=n=0,r=o.length-1;r>=0?r>=n:n>=r;s=r>=0?++n:--n)e+=o[s],e+=s===o.length-2?"&nbsp;":s===o.length-1?"":" ";return t.html(e)})},this.Spellbook.Services.focusFirstInput=function(t){var e;return e=$.extend({$element:$(".js-focusFirstInput")},t),e.$element.find("input, textarea, [contenteditable]").filter(":visible").first().trigger("focus")},this.Spellbook.Services.formPreview=function(t){var e;return e=$.extend({$element:$(".js-formPreview-input"),idName:"formPreview",dataAttr:"preview",onKeyup:null},t),e.$element.on("keyup",function(t){var s,n,r;return s=$(this),r=s.val(),n=s.data(e.dataAttr),$("#"+e.idName+"-"+n).text(r),null!=e.onKeyup?e.onKeyup(e):void 0})},this.Spellbook.Services.limiter=function(t){var e,s;return s=$.extend({$element:$(".js-limiter-element"),$toggle:$(".js-limiter-toggle"),hiddenClass:"is-hidden",limit:5},t),e=s.$element.length,e>s.limit?(s.$element.not(":lt("+s.limit+")").addClass(s.hiddenClass),s.$toggle.on("click",function(t){return t.preventDefault(),$(this).remove(),s.$element.removeClass(s.hiddenClass)})):s.$toggle.remove()},this.Spellbook.Services.loader=function(t){var e;return e=$.extend({$element:$(".js-loader-element"),$toggle:$(".js-loader-toggle"),$spinner:$("<span></span>"),$overlay:$("<div></div>"),spinnerClass:"loader",overlayClass:"loader-overlay",loadingClass:"is-loading"},t),e.$toggle.on("click",function(t){return e.$element.toggleClass(e.loadingClass),e.$element.append(e.$spinner),e.$spinner.addClass(e.spinnerClass),e.$element.append(e.$overlay),e.$overlay.addClass(e.overlayClass)})},this.Spellbook.Services.prefixClasses=function(t){var e;return e=$.extend({$element:$(".js-prefixClasses"),query:"[ class ]",prefix:"prefix"},t),e.$element.find(e.query).each(function(){var t,s,n,r,o,i;for(o=this,t=o.className.split(" "),i="",n=0,r=t.length;r>n;n++)s=t[n],i=i+" "+e.prefix+"-"+s;return o.className=i})},this.Spellbook.Services.scrollTo=function(t){var e;return e=$.extend({$element:$(".js-scrollTo"),speed:250},t),e.$element.on("click",function(t){var s;return t.preventDefault(),s=e.$element.attr("href"),$("body, html").animate({scrollTop:parseInt($(s).offset().top)},e.speed)})},this.Spellbook.Services.scrollTrigger=function(t){var e,s,n;return n=$.extend({$element:$(".js-scrollTrigger"),scrollPadding:400,activeClass:"is-active",onTrigger:null},t),s=$(window).scrollTop(),n.$element.offset().top>=0&&(e=s-n.$element.offset().top-n.scrollPadding),!n.$element.hasClass(n.activeClass)&&e?(n.$element.addClass(n.activeClass),"function"==typeof n.onTrigger?n.onTrigger(n):void 0):void 0},this.Spellbook.Services.shortcut=function(t){var e;return e=$.extend({$element:$("[data-shortcut]"),dataAttribute:"shortcut",keyCodes:Spellbook.Globals.keyCodes},t),e.$element.each(function(){var t;return t=e.keyCodes[$(this).data(e.dataAttribute)],$(document).on("keyup",function(e){return function(s){var n,r;return n=$(e),r=s.target.tagName.toLowerCase(),"input"!==r&&"textarea"!==r&&s.which===t&&(n.trigger("focus").trigger("click"),"a"===n.prop("tagName").toLowerCase())?window.location=n.attr("href"):void 0}}(this))})};var extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;this.Spellbook.Classes.ClassName=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.init=function(){return this._setDefaults({$element:$(".js-element")}),this._setEventHandlers()},e.prototype._setEventHandlers=function(){},e}(this.Spellbook.Classes.Base),this.Spellbook.Helpers.helperName=function(t){},this.Spellbook.Services.serviceName=function(t){var e;return e=$.extend({$element:$(".js-element")},t)};