this.Spellbook={},this.Spellbook.Globals={},this.Spellbook.Classes={},this.Spellbook.Helpers={},this.Spellbook.Services={},this.Spellbook.Inbox={},this.Spellbook.Classes.AutoDuplicateInput=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype._count=0,t.prototype._field=null,t.prototype._validators={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-autoDuplicateInput"),$container:$(".js-autoDuplicateInput-container"),clonedDataAttribute:"cloned",validateDataAttribute:"validate",invalidClass:"is-invalid",validClass:"is-valid",onDuplicate:null,onInvalid:null,onValid:null},t),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n,i;return e.preventDefault(),t._field=$(e.currentTarget),t._isValid()?(t._setInputState("valid"),"function"==typeof(s=t._settings).onValid&&s.onValid(t._settings),"true"!==t._field.data("cloned")&&t._duplicate(),"function"==typeof(n=t._settings).onDuplicate?n.onDuplicate(t._settings,t._count):void 0):(t._setInputState("invalid"),"function"==typeof(i=t._settings).onInvalid?i.onInvalid(t._settings):void 0)}}(this))},t.prototype._getValidationType=function(){return this._field.data(this._settings.validateDataAttribute)},t.prototype._isValid=function(){var t;return t=this._getValidationType(this._field),this._validators[""+t].test(this._field.val())},t.prototype._duplicate=function(){return++this._count,this._field.data(this._settings.clonedDataAttribute,"true").clone(!0).appendTo(this._settings.$container).removeClass(this._settings.validClass).val("").data(this._settings.clonedDataAttribute,"")},t.prototype._setInputState=function(t){switch(t){case"invalid":return this._field.removeClass(this._settings.validClass).addClass(this._settings.invalidClass);case"valid":return this._field.removeClass(this._settings.invalidClass).addClass(this._settings.validClass)}},t.prototype.getCount=function(){return this._count},t}(),this.Spellbook.Classes.CharacterCounter=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype._count=0,t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-characterCounter"),$label:$(".js-characterCounter-label"),$number:$(".js-characterCounter-number"),errorClass:"is-error",successClass:"is-success",minChars:0,maxChars:140,onMinPreceeded:null,onMaxExceeded:null,onConditionsMet:null},t),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n,i,r;return e.preventDefault(),s=$(e.currentTarget),t._count=s.val().length,t._settings.$number.text(t._count),t._count>t._settings.maxChars?(t._toggleState(s,"error"),"function"==typeof(n=t._settings).onMaxExceeded?n.onMaxExceeded(t._settings):void 0):t._count<t._settings.minChars?(t._toggleState(s,"error"),"function"==typeof(i=t._settings).onMinPreceeded?i.onMinPreceeded(t._settings):void 0):(t._toggleState(s,"success"),"function"==typeof(r=t._settings).onConditionsMet?r.onConditionsMet(t._settings):void 0)}}(this))},t.prototype._toggleState=function(t,e){switch(e){case"error":return t.removeClass(this._settings.successClass),this._settings.$label.removeClass(this._settings.successClass),t.addClass(this._settings.errorClass),this._settings.$label.addClass(this._settings.errorClass);case"success":return t.removeClass(this._settings.errorClass),this._settings.$label.removeClass(this._settings.errorClass),t.addClass(this._settings.successClass),this._settings.$label.addClass(this._settings.successClass)}},t}(),this.Spellbook.Classes.Dematerialize=function(){function t(t){this.options=t,this._settings=$.extend({$element:$(".js-dematerialize"),$trigger:$(".js-dematerialize-trigger"),itemTitle:"hidden_element",hiddenClass:"is-hidden"},this.options)}return t._settings={},t._item="",t.prototype.init=function(){return this._setEventHandlers(),this._setInitialState()},t.prototype._setEventHandlers=function(){return this._settings.$trigger instanceof jQuery?this._settings.$trigger.on("click",function(t){return function(e){return e.preventDefault(),t._toggleState()}}(this)):this._toggleStateViaKey()},t.prototype._setInitialState=function(){return this._item=localStorage.getItem(this._settings.itemTitle),"true"!==this._item?this._settings.$element.removeClass(this._settings.hiddenClass):void 0},t.prototype._toggleState=function(){return this._settings.$element.hasClass(this._settings.hiddenClass)?(this._settings.$element.removeClass(this._settings.hiddenClass),this._item=localStorage.removeItem(this._settings.itemTitle)):(this._settings.$element.addClass(this._settings.hiddenClass),this._item=localStorage.setItem(this._settings.itemTitle,"true"))},t.prototype._toggleStateViaKey=function(){return $(document).on("keyup",function(t){return function(e){var s;switch(s=e.target.tagName.toLowerCase(),e.which){case t._settings.$trigger:if("input"!==s&&"textarea"!==s)return t._toggleState()}}}(this))},t}(),this.Spellbook.Classes.Dispatcher=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-dispatcher"),dataAttr:"dispatcher-page",events:[]},this.options),this.dispatch()},t.prototype.dispatch=function(t){var e,s,n,i,r;if(null==t&&(t=null),n=this._getCurrentPage(),!n)return!1;if(null==t){for(i=this._settings.events,r=[],e=0,s=i.length;s>e;e++){switch(t=i[e],t.page){case n:t.run();break;case"all":t.run()}t.match&&n.match(t.match)?r.push(t.run()):r.push(void 0)}return r}switch(t.page){case n:return t.run();case"all":return t.run()}},t.prototype._getCurrentPage=function(){return this._settings.$element.data(this._settings.dataAttr)},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};this.Spellbook.Classes.DrawSvg=function(){function t(t){this.options=t,this.draw=bind(this.draw,this),this.init()}return t.prototype._settings={},t.prototype._paths=[],t.prototype._lengths=[],t.prototype._currentFrame=0,t.prototype._totalFrames=60,t.prototype._handle=0,t.prototype._progress=0,t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-drawSvg"),prefix:"path"},this.options),this._setStorage()},t.prototype._setStorage=function(){var t,e,s,n,i,r;for(n=this._settings.$element.find("path[id]").length,r=[],e=t=0,i=n;i>=0?i>t:t>i;e=i>=0?++t:--t)this._paths[e]=document.getElementById(this._settings.prefix+"-"+e),s=this._paths[e].getTotalLength(),this._lengths[e]=s,this._paths[e].style.strokeDasharray=s+" "+s,r.push(this._paths[e].style.strokeDashoffset=s);return r},t.prototype._setStroke=function(){var t,e,s,n;for(n=[],e=t=0,s=this._paths.length;s>=0?s>t:t>s;e=s>=0?++t:--t)n.push(this._paths[e].style.strokeDashoffset=Math.floor(this._lengths[e]*(1-this._progress)));return n},t.prototype.draw=function(){return this._progress=this._currentFrame/this._totalFrames,this._progress>1?window.cancelAnimationFrame(this._handle):(this._currentFrame++,this._setStroke(),this._handle=window.requestAnimationFrame(this.draw))},t}(),this.Spellbook.Classes.EqualHeights=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype._heights=[],t.prototype._timer=null,t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-equalHeights")},t),this._setHeight(),this._setEventHandlers()},t.prototype._setHeight=function(){var t;return this._settings.$element.css("height","auto"),this._settings.$element.each(function(t){return function(e,s){return t._heights.push($(s).height())}}(this)),t=Math.max.apply(Math,this._heights),this._settings.$element.css("height",t)},t.prototype._setEventHandlers=function(){return $(window).on("resize",function(t){return function(){return clearTimeout(t._timer),t._timer=setTimeout(t._setHeight,250)}}(this))},t}(),this.Spellbook.Classes.FormValidator=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype._input=null,t.prototype._errors=[],t.prototype._validators=["required"],t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-formValidator"),$input:$(".js-formValidator-input"),$submit:$(".js-formValidator-submit"),messageClass:"js-formValidator-message",errorClass:"is-invalid",delimiter:"|",dataAttr:"validate",showMessage:!0,onError:null,onSuccess:null},this.options),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("submit",function(t){return function(e){return t._validateAllFields()?void 0:e.preventDefault()}}(this)),this._settings.$input.on("keyup",function(t){return function(e){return t._input=$(e.currentTarget),t.validate(t._input)}}(this))},t.prototype._validateAllFields=function(){return this._settings.$input.each(function(t){return function(e,s){return t._input=$(s),t.validate(t._input)}}(this)),0===this._errors.length?!0:!1},t.prototype.validate=function(t){var e,s,n,i,r;if(i=this._parseValidators(t.data(this._settings.dataAttr)),this._element=t,Array.isArray(i)){for(r=[],e=0,n=i.length;n>e;e++)s=i[e],r.push(this._matchValidators(s));return r}return this._matchValidators(i)},t.prototype._matchValidators=function(t){switch(t){case"required":return this._validateRequired()?this._setValidationState("error","The field is required."):this._setValidationState("success")}},t.prototype._setValidationState=function(t,e){var s,n;switch(t){case"error":return this._setError(e),this._setInputState(e),"function"==typeof(s=this._settings).onError?s.onError(this._settings):void 0;case"success":return this._removeError(),this._removeInputState(),"function"==typeof(n=this._settings).onSuccess?n.onSuccess(this._settings):void 0}},t.prototype._parseValidators=function(t){var e,s,n,i,r;if(i=[],r=t.split(this._settings.delimiter),r.length>1){for(e=0,s=r.length;s>e;e++)n=r[e],i.push(n);return i}return t},t.prototype._isValidator=function(t){return-1!==this._validators.indexOf(t)},t.prototype._validateRequired=function(){return""===this._input.val()?!0:!1},t.prototype._setError=function(t){return this._errors.push({element:this._input.attr("name"),message:t})},t.prototype._removeError=function(){var t;return t=this._errors.indexOf(this._input),this._errors.splice(t,1)},t.prototype._setInputState=function(t){return this._removeInputState(),this._input.addClass(this._settings.errorClass),this._settings.showMessage?this._input.after("<p class='"+this._settings.messageClass+"'>"+t+"</p>"):void 0},t.prototype._removeInputState=function(){return this._input.removeClass(this._settings.errorClass),this._settings.showMessage?this._input.next("."+this._settings.messageClass).remove():void 0},t}(),this.Spellbook.Classes.HeadingLinks=function(){function t(t){this.init(t)}var e;return e={},t.prototype.init=function(t){return this._settings=$.extend({$element:$("h1, h2, h3, h4, h5"),anchorClass:"anchor"},t),this._addAnchors()},t.prototype._slugify=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},t.prototype._addAnchors=function(){return this._settings.$element.each(function(t){return function(e,s){var n,i;return n=$(s),i=t._slugify(n.text()),n.attr("id",i),n.prepend("<a class='"+t._settings.anchorClass+"' href='#"+i+"'>#</a>")}}(this))},t}(),this.Spellbook.Classes.KeyboardEvents=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({events:[]},this.options),this.emit()},t.prototype._match=function(t){return $(document).on("keyup",function(e){return function(s){switch(e._getKeyCode(s)){case t.key:return t.run()}}}(this))},t.prototype._getKeyCode=function(t){var e;return t=t||window.event,e=t.keyCode||t.which},t.prototype.emit=function(t){var e,s,n,i;if(null==t&&(t=null),null==t){for(n=this._settings.events,i=[],e=0,s=n.length;s>e;e++)t=n[e],i.push(this._match(t));return i}return this._match(t)},t}(),this.Spellbook.Classes.LiveSearch=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype._query="",t.prototype.init=function(t){var e;return e=$.extend({$element:$(".js-search"),$query:$(".js-search-query"),$container:$(".js-search-container"),itemNode:".js-search-item",hiddenClass:"is-hidden",emptyMessage:!0,emptyNode:".js-search-empty",onClear:null,onEmpty:null,onFound:null,onKeyup:null},t),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){var s,n;return t._query=$(e.currentTarget).val(),"function"==typeof(s=t._settings).onKeyup&&s.onKeyup(t._settings),""===t._query&&($(t._settings.itemNode).removeClass(t._settings.hiddenClass),t._clearEmptyMessage(),"function"==typeof(n=t._settings).onClear&&n.onClear(t._settings)),t._clearEmptyMessage(),t._parseDom()}}(this))},t.prototype._parseDom=function(){return this._settings.$query.each(function(t){return function(e,s){var n,i;return n=$(s),t._isQueryAbsent(n)?n.closest(t._settings.itemNode).addClass(t._settings.hiddenClass):(n.closest(t._settings.itemNode).removeClass(t._settings.hiddenClass),"function"==typeof(i=t._settings).onFound?i.onFound(t._settings):void 0)}}(this)),this._handleEmptyResults()},t.prototype._clearEmptyMessages=function(){return this._settings.emptyMessage&&$(this._settings.emptyNode).length>0?$(this._settings.emptyNode).remove():void 0},t.prototype._handleEmptyResults=function(){var t,e;return this._isEmpty()?(this._settings.emptyMessage&&(e=this._settings.emptyNode.replace(".","")),$("<p class='"+e+"'>\n  There are no results matching '"+this._query+"'.\n</p>").insertAfter(this._settings.$container),"function"==typeof(t=this._settings).onEmpty?t.onEmpty(this._settings):void 0):void 0},t.prototype._isQueryAbsent=function(t){return t.text().search(new RegExp(this._query,"i"))<0},t.prototype._isEmpty=function(){return $(this._settings.itemNode+"."+this._settings.hiddenClass).length===$(this._settings.itemNode).length},t}(),this.Spellbook.Classes.Modal=function(){function t(t){this.init(t)}return t.prototype._$modal=null,t.prototype._$backdrop=null,t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$trigger:$(".js-modal-trigger"),$close:$(".js-modal-close"),dataAttribute:"modal",backdropClass:"modal-backdrop",activeClass:"is-active",inactiveClass:"is-inactive",activeBodyClass:"is-modal-active"},t),this._setEventHandlers()},t.prototype.trigger=function(t,e,s,n){switch(null==s&&(s=!1),null==n&&(n=null),this._$modal=t,e){case"open":t.addClass(this._settings.activeClass),$("body").addClass(this._settings.activeBodyClass);break;case"close":t.removeClass(this._settings.activeClass),$("body").removeClass(this._settings.activeBodyClass),this._cleanupEvents()}return s||this._toggleOverlay(e),"function"==typeof n&&n(),this._setActiveEventHandlers()},t.prototype._toggleOverlay=function(t){switch(t){case"open":return $("<div class="+this._settings.backdropClass+"></div>").appendTo($("body")),this._$backdrop=$("."+this._settings.backdropClass),setTimeout(function(t){return function(){return t._$backdrop.addClass(t._settings.activeClass)}}(this),25);case"close":return this._$backdrop.removeClass(this._settings.activeClass),setTimeout(function(){return this._$backdrop.remove()},500)}},t.prototype._setEventHandlers=function(){return this._settings.$trigger.on("click",function(t){return function(e){var s;return e.preventDefault(),s=$(e.currentTarget).data(t._settings.dataAttribute),t._$modal=$(s),t.trigger(t._$modal,"open")}}(this))},t.prototype._setActiveEventHandlers=function(){return this._settings.$close.on("click",function(t){return function(e){return e.preventDefault(),t.trigger(t._$modal,"close")}}(this)),this._$backdrop.on("click",function(t){return function(e){return t.trigger(t._$modal,"close")}}(this)),$(document).on("keydown",function(t){return function(e){switch(e.which){case 27:return t.trigger(t._$modal,"close")}}}(this))},t.prototype._cleanupEvents=function(){return this._settings.$close.off("click"),$(document).off("keydown")},t}(),this.Spellbook.Classes.QuantityInput=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype._value=null,t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-quantityInput"),$field:$(".js-quantityInput-field"),$increase:$(".js-quantityInput-increase"),$decrease:$(".js-quantityInput-decrease"),$target:$(".js-quantityInput-target"),targetBaseValue:29,targetValuePrefix:"$",minValue:1,maxValue:100,onIncrease:null,onDecrease:null,onTargetUpdate:null},t),this._setValue(),this._setEventHandlers()},t.prototype._setValue=function(){return this._value=parseInt(this._settings.$element.val())},t.prototype._setEventHandlers=function(){return this._settings.$element.on("keyup",function(t){return function(e){return t._setValue(),isNaN(t._value)||t._value<t._settings.minValue||t._value>t._settings.maxValue?void 0:t._updateValue()}}(this)),this._settings.$increase.on("click",function(t){return function(e){var s;return e.preventDefault(),t._value>=t._settings.maxValue||t._updateValue("up"),"function"==typeof(s=t._settings).onIncrease?s.onIncrease(t._settings):void 0}}(this)),this._settings.$decrease.on("click",function(t){return function(e){var s;return e.preventDefault(),t._value<=t._settings.minValue||t._updateValue("down"),"function"==typeof(s=t._settings).onDecrease?s.onDecrease(t._settings):void 0}}(this))},t.prototype._updateValue=function(t){var e;switch(null==t&&(t=""),t){case"up":this._settings.$element.val(++this._value);break;case"down":this._settings.$element.val(--this._value);break;default:this._settings.$element.val(this._value)}return this._updateTarget(),"function"==typeof(e=this._settings).onTargetUpdate?e.onTargetUpdate(this._settings):void 0},t.prototype._updateTarget=function(){var t;return t=this._value*this._settings.targetBaseValue,this._settings.$target.text(""+this._settings.targetValuePrefix+t)},t}(),this.Spellbook.Classes.QueryParams=function(){function t(t){this.options=t,this.init()}return t.prototype.params={},t.prototype.variables=[],t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({url:null},this.options),this._parseQueryString(this._settings.url),this._sortParams()},t.prototype._parseQueryString=function(t){var e;return e=t?t.split("?")[1]:window.location.search.substring(1),this.variables=e.split("&")},t.prototype._sortParams=function(){var t,e,s,n,i,r;for(i=this.variables,r=[],t=0,e=i.length;e>t;t++)n=i[t],s=n.split("="),void 0!==s[1]?r.push(this.params[s[0]]=s[1]):r.push(void 0);return r},t.prototype.allParams=function(){return this.params},t.prototype.matchParamKey=function(t){var e,s,n;s=this.params;for(e in s)if(n=s[e],t===e)return!0;return!1},t.prototype.matchParamValue=function(t){var e,s,n;s=this.params;for(e in s)if(n=s[e],t===n)return!0;return!1},t}(),this.Spellbook.Classes.SaveProgress=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-saveProgress"),$container:$(".js-saveProgress-container"),dataAttribute:"saveprogress"},t),this._restoreProgress(),this._setEventHandlers()},t.prototype._eraseProgress=function(t){return t.find(this._settings.$element).each(function(t){return function(e,s){var n;return n=$(s).data(t._settings.dataAttribute),localStorage.removeItem(n)}}(this))},t.prototype._restoreProgress=function(){return this._settings.$element.each(function(t){return function(e,s){var n,i,r;return n=$(s),i=n.data(t._settings.dataAttribute),r=localStorage.getItem(i),null!==r?n.val(r):void 0}}(this))},t.prototype._setEventHandlers=function(){return this._settings.$element.on("input",function(t){return function(e){var s,n,i;return s=$(e.currentTarget),n=s.data(t._settings.dataAttribute),i=s.val(),t._storeProgress(n,i)}}(this)),this._settings.$container.on("submit",function(t){return function(e){return t._eraseProgress($(e.currentTarget))}}(this))},t.prototype._storeProgress=function(t,e){return localStorage.setItem(t,e)},t}(),this.Spellbook.Classes.SelectText=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-selectText"),onClick:null},t),this._setEventHandlers()},t.prototype._selectElement=function(t){var e,s,n;return e=t[0],document.body.createTextRange?(s=document.body.createTextRange(),s.moveToElementText(e),s.select()):window.getSelection?(n=window.getSelection(),s=document.createRange(),s.selectNodeContents(e),n.removeAllRanges(),n.addRange(s)):void 0},t.prototype._setEventHandlers=function(){return this._settings.$element.on("click",function(t){return function(e){var s;return t._selectElement(t._settings.$element),$(e).trigger("focus").trigger("select"),"function"==typeof(s=t._settings).onClick?s.onClick(t._settings):void 0}}(this))},t}(),this.Spellbook.Classes.Share=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-share"),popup:{height:400,width:575,left:0,top:0}},t),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("click",function(t){return function(e){var s,n,i,r;return e.preventDefault(),s=$(e.currentTarget),r=s.attr("href"),i=s.data("share-service"),n=s.data("share-text"),t._triggerPopup(i,r,n)}}(this))},t.prototype._triggerPopup=function(t,e,s){var n;switch(n="width="+this._settings.popup.width+", height="+this._settings.popup.height+", top="+this._settings.popup.top+", left="+this._settings.popup.left,t){case"twitter":e="https://twitter.com/share?text="+s+"&url="+e;break;case"facebook":e="https://www.facebook.com/sharer/sharer.php?u="+e,t="facebook-share-dialog";break;case"google":e="https://plus.google.com/share?url="+e}return window.open(e,t,n)},t}(),this.Spellbook.Classes.ShowPassword=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$input:$(".js-showPassword-input"),$toggle:$(".js-showPassword-toggle"),showByDefault:!1},t),this._setEventHandlers(),this._settings.showByDefault?this._showPassword():void 0},t.prototype._setEventHandlers=function(){return this._settings.$toggle.on("change",function(t){return function(e){var s;return s=$(e.currentTarget).prop("checked"),s?t._showPassword():t._settings.$input.attr("type","password")}}(this))},t.prototype._showPassword=function(){return this._settings.$input.attr("type","text"),this._settings.$toggle.prop("checked",!0)},t}(),this.Spellbook.Classes.Singleton=function(){function t(){}return t.prototype._instance=null,t.getInstance=function(){return null!=this._instance?this._instance:this._instance=function(t,e,s){s.prototype=t.prototype;var n=new s,i=t.apply(n,e);return Object(i)===i?i:n}(this,arguments,function(){})},t}(),this.Spellbook.Classes.StateUrls=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-stateUrls"),$link:$(".js-stateUrls-link"),hiddenClass:"is-hidden",activeClass:"is-active",dataAttribute:"state"},t),this._setInitialState(this._getCurrentState()),this._setEventHandlers()},t.prototype._sanitizeHash=function(t){return t.replace(/(<([^>]+)>)/gi,"")},t.prototype._getCurrentState=function(){var t;return t=window.location.hash?this._sanitizeHash(window.location.hash):this._settings.$link.first().attr("href")},t.prototype._setInitialState=function(t){return this._settings.$element.not(t).addClass(this._settings.hiddenClass),$("[data-"+this._settings.dataAttribute+"="+t+"]").removeClass(this._settings.hiddenClass).addClass(this._settings.activeClass)},t.prototype._setEventHandlers=function(){return this._settings.$link.on("click",function(t){return function(e){var s,n;return e.preventDefault(),s=$(e.currentTarget),n=s.attr("href"),history.pushState?history.pushState(null,null,n):window.location.hash=n,$(n).length>0?t._showSection(s,n):void 0}}(this))},t.prototype._showSection=function(t,e){return this._settings.$link.removeClass(this._settings.activeClass),this._settings.$element.addClass(this._settings.hiddenClass),t.addClass(this._settings.activeClass),$(e).removeClass(this._settings.hiddenClass)},t}(),this.Spellbook.Classes.Toggle=function(){function t(t){this.init(t)}return t.prototype._settings={},t.prototype.init=function(t){return this._settings=$.extend({$element:$(".js-toggle"),proximity:"next",event:"click",toggleClass:"is-hidden",activeClass:"is-active",initialState:null,onClick:null,onMouseover:null,onMouseout:null},t),this._setEventHandlers()},t.prototype._setEventHandlers=function(){switch(this._settings.event){case"click":return this._handleClickEvent();case"hover":return this._handleHoverEvent()}},t.prototype._handleClickEvent=function(){return this._settings.$element.on("click",function(t){return function(e){var s,n;switch(e.preventDefault(),s=$(e.currentTarget),"function"==typeof(n=t._settings).onClick&&n.onClick(t._settings),t._settings.$element.toggleClass(t._settings.activeClass),t._settings.proximity){case"next":return s.next().toggleClass(t._settings.toggleClass);case"prev":return s.prev().toggleClass(t._settings.toggleClass);case"nextParent":return s.parent().next().toggleClass(t._settings.toggleClass);case"prevParent":return s.parent().prev().toggleClass(t._settings.toggleClass);default:return"object"==typeof t._settings.proximity?t._settings.proximity.toggleClass(t._settings.toggleClass):s.find(t._settings.proximity).toggleClass(t._settings.toggleClass)}}}(this))},t.prototype._handleHoverEvent=function(){return this._settings.initialState&&this._settings.initialState(this._settings),this._settings.$element.on({mouseenter:function(t){return function(e){return t._handleHoverStateEvent($(e.currentTarget),"on")}}(this),mouseleave:function(t){return function(e){return t._handleHoverStateEvent($(e.currentTarget),"off")}}(this)})},t.prototype._handleHoverStateEvent=function(t,e){var s,n;switch(e){case"on":"function"==typeof(s=this._settings).onMouseover&&s.onMouseover(this._settings),t.addClass(this._settings.activeClass);break;case"off":"function"==typeof(n=this._settings).onMouseout&&n.onMouseout(this._settings),t.removeClass(this._settings.activeClass)}switch(this._settings.proximity){case"next":return this._toggleClass(t.next());case"prev":return this._toggleClass(t.prev());case"nextParent":return this._toggleClass(t.parent().next());case"prevParent":return this._toggleClass(t.parent().prev());default:return"object"==typeof this._settings.proximity?this._toggleClass(this._settings.proximity):this._toggleClass(t.find(this._settings.proximity))}},t.prototype._toggleClass=function(t,e){return null==e&&(e=this._settings.toggleClass),t.hasClass(e)?t.removeClass(e):t.addClass(e)},t}(),this.Spellbook.Helpers.isBlank=function(t){return 0===t.trim().length?!0:!1},this.Spellbook.Helpers.keyCodes={enter:13,shift:16,ctrl:17,alt:18,esc:27,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,comma:188,slash:191,backslash:220,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},this.Spellbook.Helpers.randomizer=function(t){var e;return e=Math.floor(Math.random()*t.length),t[e]},this.Spellbook.Helpers.sanitize=function(t){return t.replace(/(<([^>]+)>)/gi,"")},this.Spellbook.Helpers.slugify=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},this.Spellbook.Helpers.uid=function(t){var e;for(null==t&&(t=10),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)},this.Spellbook.Services.autoSubmit=function(t){var e;return e=$.extend({$element:$(".js-autoSubmit")},t),e.$element.on("change",function(){return $(this).closest("form").trigger("submit")})},this.Spellbook.Services.clickOut=function(t){var e;return e=$.extend({$element:$(".js-clickout"),run:null},t),$(document).on("click",function(){return e.run()}),e.$element.on("click",function(t){return t.stopPropagation()})},this.Spellbook.Services.contextMenu=function(t){var e;return e=$.extend({$element:$(".js-contextMenu"),activeClass:"is-active"},t),$(document).on("contextmenu",function(t){return t.preventDefault(),e.$element.css({top:t.pageY+"px",left:t.pageX+"px"}).addClass(e.activeClass)}),$(document).on("click",function(t){return e.$element.removeClass(e.activeClass)})},this.Spellbook.Services.escapeOut=function(t){var e;return e=$.extend({run:null},t),$(document).on("keyup",function(t){switch(t.which){case 27:return e.run()}})},this.Spellbook.Services.filter=function(t){var e;return e=$.extend({$element:$(".js-filter"),$item:$(".js-filter-item"),$link:$(".js-filter-link"),$empty:$("<p>There are no items to show.</p>"),activeClass:"is-active",hiddenClass:"is-hidden",dataAttribute:"item"},t),e.$link.on("click",function(t){var s,n,i;return t.preventDefault(),s=$(this),i=s.attr("href").split("#")[1],e.$link.removeClass(e.activeClass),s.toggleClass(e.activeClass),"all"!==i?(e.$item.addClass(e.hiddenClass),n=$("[data-"+e.dataAttribute+"="+i+"]"),n.length>0?n.removeClass(e.hiddenClass):e.$element.append(e.$empty)):e.$item.removeClass(e.hiddenClass)})},this.Spellbook.Services.fixOrphanWords=function(t){var e;return e=$.extend({$element:$(".js-orphan")},t),e.$element.each(function(){var t,e,s,n,i,r;for(t=$(this),r=t.text().split(" "),e="",s=n=0,i=r.length-1;i>=0?i>=n:n>=i;s=i>=0?++n:--n)e+=r[s],e+=s===r.length-2?"&nbsp;":s===r.length-1?"":" ";return t.html(e)})},this.Spellbook.Services.formPreview=function(t){var e;return e=$.extend({$element:$(".js-formPreview-input"),idName:"formPreview",dataAttr:"preview",onKeyup:null},t),e.$element.on("keyup",function(t){var s,n,i;return s=$(this),i=s.val(),n=s.data(e.dataAttr),$("#"+e.idName+"-"+n).text(i),null!=e.onKeyup?e.onKeyup(e):void 0})},this.Spellbook.Services.limiter=function(t){var e,s;return s=$.extend({$element:$(".js-limiter-element"),$toggle:$(".js-limiter-toggle"),hiddenClass:"is-hidden",limit:5},t),e=s.$element.length,e>s.limit?(s.$element.not(":lt("+s.limit+")").addClass(s.hiddenClass),s.$toggle.on("click",function(t){return t.preventDefault(),$(this).remove(),s.$element.removeClass(s.hiddenClass)})):s.$toggle.remove()},this.Spellbook.Services.loader=function(t){var e;return e=$.extend({$element:$(".js-loader-element"),$toggle:$(".js-loader-toggle"),$spinner:$("<span></span>"),$overlay:$("<div></div>"),spinnerClass:"loader",overlayClass:"loader-overlay",loadingClass:"is-loading"},t),e.$toggle.on("click",function(t){return e.$element.toggleClass(e.loadingClass),e.$element.append(e.$spinner),e.$spinner.addClass(e.spinnerClass),e.$element.append(e.$overlay),e.$overlay.addClass(e.overlayClass)})},this.Spellbook.Services.prefixClasses=function(t){var e;return e=$.extend({$element:$(".js-prefixClasses"),query:"[ class ]",prefix:"prefix"},t),e.$element.find(e.query).each(function(){var t,s,n,i,r,o;for(r=this,t=r.className.split(" "),o="",n=0,i=t.length;i>n;n++)s=t[n],o=o+" "+e.prefix+"-"+s;return r.className=o})},this.Spellbook.Services.scrollTo=function(t){var e;return e=$.extend({$element:$(".js-scrollTo"),speed:250},t),e.$element.on("click",function(t){var s;return t.preventDefault(),s=e.$element.attr("href"),$("body, html").animate({scrollTop:parseInt($(s).offset().top)},e.speed)})},this.Spellbook.Services.scrollTrigger=function(t){var e,s,n;return n=$.extend({$element:$(".js-scrollTrigger"),scrollPadding:400,activeClass:"is-active",onTrigger:null},t),s=$(window).scrollTop(),n.$element.offset().top>=0&&(e=s-n.$element.offset().top-n.scrollPadding),!n.$element.hasClass(n.activeClass)&&e?(n.$element.addClass(n.activeClass),"function"==typeof n.onTrigger?n.onTrigger(n):void 0):void 0},this.Spellbook.Services.shortcut=function(t){
var e;return e=$.extend({$element:$("[data-shortcut]"),dataAttribute:"shortcut",keyCodes:Spellbook.Helpers.keyCodes},t),e.$element.each(function(){var t;return t=e.keyCodes[$(this).data(e.dataAttribute)],$(document).on("keyup",function(e){return function(s){var n,i;return n=$(e),i=s.target.tagName.toLowerCase(),"input"!==i&&"textarea"!==i&&s.which===t&&(n.trigger("focus").trigger("click"),"a"===n.prop("tagName").toLowerCase())?window.location=n.attr("href"):void 0}}(this))})},this.Spellbook.Classes.ClassName=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-element")},this.options),this._setEventHandlers()},t.prototype._setEventHandlers=function(){},t}(),this.Spellbook.Helpers.helperName=function(t){},this.Spellbook.Services.serviceName=function(t){var e;return e=$.extend({$element:$(".js-element")},t)};