this.Spellbook={},this.Spellbook.Globals={},this.Spellbook.Classes={},this.Spellbook.Helpers={},this.Spellbook.Modules={},this.Spellbook.Services={},this.Spellbook.Inbox={},this.Spellbook.Classes.Dematerialize=function(){function t(t){this.options=t,this._settings=$.extend({$element:$(".js-dematerialize"),$trigger:$(".js-dematerialize-trigger"),itemTitle:"hidden_element",hiddenClass:"is-hidden"},this.options)}return t._settings={},t._item="",t.prototype.init=function(){return this._setEventHandlers(),this._setInitialState()},t.prototype._setEventHandlers=function(){return this._settings.$trigger instanceof jQuery?this._settings.$trigger.on("click",function(t){return function(e){return e.preventDefault(),t._toggleState()}}(this)):this._toggleStateViaKey()},t.prototype._setInitialState=function(){return this._item=localStorage.getItem(this._settings.itemTitle),"true"!==this._item?this._settings.$element.removeClass(this._settings.hiddenClass):void 0},t.prototype._toggleState=function(){return this._settings.$element.hasClass(this._settings.hiddenClass)?(this._settings.$element.removeClass(this._settings.hiddenClass),this._item=localStorage.removeItem(this._settings.itemTitle)):(this._settings.$element.addClass(this._settings.hiddenClass),this._item=localStorage.setItem(this._settings.itemTitle,"true"))},t.prototype._toggleStateViaKey=function(){return $(document).on("keyup",function(t){return function(e){var n;switch(n=e.target.tagName.toLowerCase(),e.which){case t._settings.$trigger:if("input"!==n&&"textarea"!==n)return t._toggleState()}}}(this))},t}(),this.Spellbook.Classes.Dispatcher=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-dispatcher"),dataAttr:"dispatcher-page",events:[]},this.options),this.dispatch()},t.prototype.dispatch=function(t){var e,n,s,r,i;if(null==t&&(t=null),s=this._getCurrentPage(),!s)return!1;if(null==t){for(r=this._settings.events,i=[],e=0,n=r.length;n>e;e++){switch(t=r[e],t.page){case s:t.run()}i.push(t.match?s.match(t.match)?t.run():void 0:void 0)}return i}switch(t.page){case s:return t.run()}},t.prototype._getCurrentPage=function(){return this._settings.$element.data(this._settings.dataAttr)},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};this.Spellbook.Classes.DrawSvg=function(){function t(t){this.options=t,this.draw=bind(this.draw,this),this.init()}return t.prototype._settings={},t.prototype._paths=[],t.prototype._lengths=[],t.prototype._currentFrame=0,t.prototype._totalFrames=60,t.prototype._handle=0,t.prototype._progress=0,t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-drawSvg"),prefix:"path"},this.options),this._setStorage()},t.prototype._setStorage=function(){var t,e,n,s,r,i;for(s=this._settings.$element.find("path[id]").length,i=[],e=t=0,r=s;r>=0?r>t:t>r;e=r>=0?++t:--t)this._paths[e]=document.getElementById(this._settings.prefix+"-"+e),n=this._paths[e].getTotalLength(),this._lengths[e]=n,this._paths[e].style.strokeDasharray=n+" "+n,i.push(this._paths[e].style.strokeDashoffset=n);return i},t.prototype._setStroke=function(){var t,e,n,s;for(s=[],e=t=0,n=this._paths.length;n>=0?n>t:t>n;e=n>=0?++t:--t)s.push(this._paths[e].style.strokeDashoffset=Math.floor(this._lengths[e]*(1-this._progress)));return s},t.prototype.draw=function(){return this._progress=this._currentFrame/this._totalFrames,this._progress>1?window.cancelAnimationFrame(this._handle):(this._currentFrame++,this._setStroke(),this._handle=window.requestAnimationFrame(this.draw))},t}(),this.Spellbook.Classes.FormValidator=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype._input=null,t.prototype._errors=[],t.prototype._validators=["required"],t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-formValidator"),$input:$(".js-formValidator-input"),$submit:$(".js-formValidator-submit"),messageClass:"js-formValidator-message",errorClass:"is-invalid",delimiter:"|",dataAttr:"validate",showMessage:!0,onError:null,onSuccess:null},this.options),this._setEventHandlers()},t.prototype._setEventHandlers=function(){return this._settings.$element.on("submit",function(t){return function(e){return t._validateAllFields()?void 0:e.preventDefault()}}(this)),this._settings.$input.on("keyup",function(t){return function(e){return t._input=$(e.currentTarget),t.validate(t._input)}}(this))},t.prototype._validateAllFields=function(){return this._settings.$input.each(function(t){return function(e,n){return t._input=$(n),t.validate(t._input)}}(this)),0===this._errors.length?!0:!1},t.prototype.validate=function(t){var e,n,s,r,i;if(r=this._parseValidators(t.data(this._settings.dataAttr)),this._element=t,Array.isArray(r)){for(i=[],e=0,s=r.length;s>e;e++)n=r[e],i.push(this._matchValidators(n));return i}return this._matchValidators(r)},t.prototype._matchValidators=function(t){switch(t){case"required":return this._validateRequired()?this._setValidationState("error","The field is required."):this._setValidationState("success")}},t.prototype._setValidationState=function(t,e){switch(t){case"error":if(this._setError(e),this._setInputState(e),null!=this._settings.onError)return this._settings.onError(this._settings);break;case"success":if(this._removeError(),this._removeInputState(),null!=this._settings.onSuccess)return this._settings.onSuccess(this._settings)}},t.prototype._parseValidators=function(t){var e,n,s,r,i;if(r=[],i=t.split(this._settings.delimiter),i.length>1){for(e=0,n=i.length;n>e;e++)s=i[e],r.push(s);return r}return t},t.prototype._isValidator=function(t){return-1!==this._validators.indexOf(t)},t.prototype._validateRequired=function(){return""===this._input.val()?!0:!1},t.prototype._setError=function(t){return this._errors.push({element:this._input.attr("name"),message:t})},t.prototype._removeError=function(){var t;return t=this._errors.indexOf(this._input),this._errors.splice(t,1)},t.prototype._setInputState=function(t){return this._removeInputState(),this._input.addClass(this._settings.errorClass),this._settings.showMessage?this._input.after("<p class='"+this._settings.messageClass+"'>"+t+"</p>"):void 0},t.prototype._removeInputState=function(){return this._input.removeClass(this._settings.errorClass),this._settings.showMessage?this._input.next("."+this._settings.messageClass).remove():void 0},t}(),this.Spellbook.Classes.KeyboardEvents=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({events:[]},this.options),this.emit()},t.prototype._match=function(t){return $(document).on("keyup",function(e){return function(n){switch(e._getKeyCode(n)){case t.key:return t.run()}}}(this))},t.prototype._getKeyCode=function(t){var e;return t=t||window.event,e=t.keyCode||t.which},t.prototype.emit=function(t){var e,n,s,r;if(null==t&&(t=null),null==t){for(s=this._settings.events,r=[],e=0,n=s.length;n>e;e++)t=s[e],r.push(this._match(t));return r}return this._match(t)},t}(),this.Spellbook.Classes.QueryParams=function(){function t(t){this.options=t,this.init()}return t.prototype.params={},t.prototype.variables=[],t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({url:null},this.options),this._parseQueryString(this._settings.url),this._sortParams()},t.prototype._parseQueryString=function(t){var e;return e=t?t.split("?")[1]:window.location.search.substring(1),this.variables=e.split("&")},t.prototype._sortParams=function(){var t,e,n,s,r,i;for(r=this.variables,i=[],t=0,e=r.length;e>t;t++)s=r[t],n=s.split("="),i.push(void 0!==n[1]?this.params[n[0]]=n[1]:void 0);return i},t.prototype.allParams=function(){return this.params},t.prototype.matchParamKey=function(t){var e,n,s;n=this.params;for(e in n)if(s=n[e],t===e)return!0;return!1},t.prototype.matchParamValue=function(t){var e,n,s;n=this.params;for(e in n)if(s=n[e],t===s)return!0;return!1},t}(),this.Spellbook.Classes.Singleton=function(){function t(){}return t.prototype._instance=null,t.getInstance=function(){return null!=this._instance?this._instance:this._instance=function(t,e,n){n.prototype=t.prototype;var s=new n,r=t.apply(s,e);return Object(r)===r?r:s}(this,arguments,function(){})},t}(),this.Spellbook.Helpers.keyCodes={enter:13,shift:16,ctrl:17,alt:18,esc:27,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,comma:188,slash:191,backslash:220,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},this.Spellbook.QueryParams=function(){function t(t){this.options=t,this.init()}return t.prototype.params={},t.prototype.variables=[],t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({url:null},this.options),this._parseQueryString(this._settings.url),this._sortParams()},t.prototype._parseQueryString=function(t){var e;return e=t?t.split("?")[1]:window.location.search.substring(1),this.variables=e.split("&")},t.prototype._sortParams=function(){var t,e,n,s,r,i;for(r=this.variables,i=[],t=0,e=r.length;e>t;t++)s=r[t],n=s.split("="),i.push(void 0!==n[1]?this.params[n[0]]=n[1]:void 0);return i},t.prototype.allParams=function(){return this.params},t.prototype.matchParamKey=function(t){var e,n,s;n=this.params;for(e in n)if(s=n[e],t===e)return!0;return!1},t.prototype.matchParamValue=function(t){var e,n,s;n=this.params;for(e in n)if(s=n[e],t===s)return!0;return!1},t}(),this.Spellbook.Helpers.randomizer=function(t){var e;return e=Math.floor(Math.random()*t.length),t[e]},this.Spellbook.Helpers.sanitize=function(t){return t.replace(/(<([^>]+)>)/gi,"")},this.Spellbook.Helpers.slugify=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},this.Spellbook.Helpers.uid=function(t){var e;for(null==t&&(t=10),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)},this.Spellbook.Modules.AutoDuplicateInput=function(){var t,e,n,s,r,i,o,a,l,u,c;return a={},t=0,n=null,l={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},c=function(t){return a=$.extend({$element:$(".js-autoDuplicateInput"),$container:$(".js-autoDuplicateInput-container"),clonedDataAttribute:"cloned",validateDataAttribute:"validate",invalidClass:"is-invalid",validClass:"is-valid",onDuplicate:null,onInvalid:null,onValid:null},t),i()},i=function(){return a.$element.on("keyup",function(s){if(s.preventDefault(),n=$(this),r()){if(o("valid"),null!=a.onValid&&a.onValid(a),"true"!==n.data("cloned")&&e(),null!=a.onDuplicate)return a.onDuplicate(a,t)}else if(o("invalid"),null!=a.onInvalid)return a.onInvalid(a)})},s=function(){return n.data(a.validateDataAttribute)},r=function(){var t;return t=s(n),l[""+t].test(n.val())},e=function(){return++t,n.data(a.clonedDataAttribute,"true").clone(!0).appendTo(a.$container).removeClass(a.validClass).val("").data(a.clonedDataAttribute,"")},o=function(t){switch(t){case"invalid":return n.removeClass(a.validClass).addClass(a.invalidClass);case"valid":return n.removeClass(a.invalidClass).addClass(a.validClass)}},u=function(){return t},{init:c,getCount:u}}(),this.Spellbook.Modules.CharacterCounter=function(){var t,e,n,s,r;return n={},t=0,r=function(t){return n=$.extend({$element:$(".js-characterCounter"),$label:$(".js-characterCounter-label"),$number:$(".js-characterCounter-number"),errorClass:"is-error",successClass:"is-success",minChars:0,maxChars:140,onMinPreceeded:null,onMaxExceeded:null,onConditionsMet:null},t),e()},e=function(){return n.$element.on("keyup",function(e){var r;if(e.preventDefault(),r=$(this),t=r.val().length,n.$number.text(t),t>n.maxChars){if(s(r,"error"),null!=n.onMaxExceeded)return n.onMaxExceeded(n)}else if(t<n.minChars){if(s(r,"error"),null!=n.onMinPreceeded)return n.onMinPreceeded(n)}else if(s(r,"success"),null!=n.onConditionsMet)return n.onConditionsMet(n)})},s=function(t,e){switch(e){case"error":return t.removeClass(n.successClass),n.$label.removeClass(n.successClass),t.addClass(n.errorClass),n.$label.addClass(n.errorClass);case"success":return t.removeClass(n.errorClass),n.$label.removeClass(n.errorClass),t.addClass(n.successClass),n.$label.addClass(n.successClass)}},{init:r}}(),this.Spellbook.Modules.EqualHeights=function(){var t,e,n,s,r,i;return s={},t=[],r=null,i=function(t){return s=$.extend({$element:$(".js-equalHeights")},t),n(),e()},n=function(){var e;return s.$element.css("height","auto"),s.$element.each(function(){return t.push($(this).height())}),e=Math.max.apply(Math,t),s.$element.css("height",e)},e=function(){return $(window).on("resize",function(){return clearTimeout(r),r=setTimeout(n,250)})},{init:i}}(),this.Spellbook.Modules.HeadingLinks=function(){var t,e,n,s;return e={},s=function(n){return e=$.extend({$element:$("h1, h2, h3, h4, h5"),anchorClass:"anchor"},n),t()},n=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},t=function(){return e.$element.each(function(){var t,s;return t=$(this),s=n(t.text()),t.attr("id",s),t.prepend("<a class='"+e.anchorClass+"' href='#"+s+"'>#</a>")})},{init:s}}(),this.Spellbook.Modules.KeyboardEvents=function(){var t,e,n,s,r;return n={},r=function(t){return n=$.extend({events:[]},t),s()},e=function(e){return $(document).on("keyup",function(n){switch(t(n)){case e.key:return e.run()}})},t=function(t){var e;return t=t||window.event,e=t.keyCode||t.which},s=function(t){var s,r,i,o;if(null==t&&(t=null),null==t){for(i=n.events,o=[],s=0,r=i.length;r>s;s++)t=i[s],o.push(e(t));return o}return e(t)},{init:r,emit:s}}(),this.Spellbook.Modules.LiveSearch=function(){var t,e,n,s,r,i,o,a,l;return a={},i="",l=function(t){return a=$.extend({$element:$(".js-search"),$query:$(".js-search-query"),$container:$(".js-search-container"),itemNode:".js-search-item",hiddenClass:"is-hidden",emptyMessage:!0,emptyNode:".js-search-empty",onClear:null,onEmpty:null,onFound:null,onKeyup:null},t),o()},o=function(){return a.$element.on("keyup",function(){return i=$(this).val(),null!=a.onKeyup&&a.onKeyup(a),""===i&&($(a.itemNode).removeClass(a.hiddenClass),t(),null!=a.onClear&&a.onClear(a)),t(),r()})},r=function(){return a.$query.each(function(){var t;return t=$(this),s(t)?t.closest(a.itemNode).addClass(a.hiddenClass):(t.closest(a.itemNode).removeClass(a.hiddenClass),null!=a.onFound?a.onFound(a):void 0)}),e()},t=function(){return a.emptyMessage&&$(a.emptyNode).length>0?$(a.emptyNode).remove():void 0},e=function(){var t;return n()&&(a.emptyMessage&&(t=a.emptyNode.replace(".","")),$("<p class='"+t+"'>\n  There are no results matching '"+i+"'.\n</p>").insertAfter(a.$container),null!=a.onEmpty)?a.onEmpty(a):void 0},s=function(t){return t.text().search(new RegExp(i,"i"))<0},n=function(){return $(a.itemNode+"."+a.hiddenClass).length===$(a.itemNode).length},{init:l}}(),this.Spellbook.Modules.Modal=function(){var t,e,n,s,r,i,o,a,l;return e=null,t=null,i={},a=function(t){return i=$.extend({$trigger:$(".js-modal-trigger"),$close:$(".js-modal-close"),dataAttribute:"modal",backdropClass:"modal-backdrop",activeClass:"is-active",inactiveClass:"is-inactive",activeBodyClass:"is-modal-active"},t),r(),this},l=function(t,r,a,l){switch(null==a&&(a=!1),null==l&&(l=null),e=t,r){case"open":t.addClass(i.activeClass),$("body").addClass(i.activeBodyClass);break;case"close":t.removeClass(i.activeClass),$("body").removeClass(i.activeBodyClass),n()}return a||o(r),l&&l(),s()},o=function(e){switch(e){case"open":return $("<div class="+i.backdropClass+"></div>").appendTo($("body")),t=$("."+i.backdropClass),setTimeout(function(){return t.addClass(i.activeClass)},25);case"close":return t.removeClass(i.activeClass),setTimeout(function(){return t.remove()},500)}},r=function(){return i.$trigger.on("click",function(t){var n;return t.preventDefault(),n=$(this).data(i.dataAttribute),e=$(n),l(e,"open")})},s=function(){return i.$close.on("click",function(t){return t.preventDefault(),l(e,"close")}),t.on("click",function(){return l(e,"close")}),$(document).on("keydown",function(t){switch(t.which){case 27:return l(e,"close")}})},n=function(){return i.$close.off("click"),$(document).off("keydown")},{init:a,trigger:l}}(),this.Spellbook.Modules.QuantityInput=function(){var t,e,n,s,r,i,o;return n={},i=null,o=function(s){return n=$.extend({$element:$(".js-quantityInput"),$field:$(".js-quantityInput-field"),$increase:$(".js-quantityInput-increase"),$decrease:$(".js-quantityInput-decrease"),$target:$(".js-quantityInput-target"),targetBaseValue:29,targetValuePrefix:"$",minValue:1,maxValue:100,onIncrease:null,onDecrease:null,onTargetUpdate:null},s),e(),t()},e=function(){return i=parseInt(n.$element.val())},t=function(){return n.$element.on("keyup",function(){return e(),isNaN(i)||i<n.minValue||i>n.maxValue?void 0:r()}),n.$increase.on("click",function(t){return t.preventDefault(),i>=n.maxValue||r("up"),null!=n.onIncrease?n.onIncrease(n):void 0}),n.$decrease.on("click",function(t){return t.preventDefault(),i<=n.minValue||r("down"),null!=n.onDecrease?n.onDecrease(n):void 0})},r=function(t){switch(null==t&&(t=""),t){case"up":n.$element.val(++i);break;case"down":n.$element.val(--i);break;default:n.$element.val(i)}return s(),null!=n.onTargetUpdate?n.onTargetUpdate(n):void 0},s=function(){var t;return t=i*n.targetBaseValue,n.$target.text(""+n.targetValuePrefix+t)},{init:o}}(),this.Spellbook.Modules.SaveProgress=function(){var t,e,n,s,r,i;return s={},i=function(t){return s=$.extend({$element:$(".js-saveProgress"),$container:$(".js-saveProgress-container"),dataAttribute:"saveprogress"},t),e(),n()},t=function(t){return t.find(s.$element).each(function(){var t;return t=$(this).data(s.dataAttribute),localStorage.removeItem(t)})},e=function(){return s.$element.each(function(){var t,e,n;return t=$(this),e=t.data(s.dataAttribute),n=localStorage.getItem(e),t.val(n)})},n=function(){return s.$element.on("input",function(){var t,e,n;return t=$(this),e=t.data(s.dataAttribute),n=t.val(),r(e,n)}),s.$container.on("submit",function(){return t($(this))})},r=function(t,e){return localStorage.setItem(t,e)},{init:i}}(),this.Spellbook.Modules.selectText=function(){var t,e,n,s;return n={},s=function(t){return n=$.extend({$element:$(".js-selectText"),onClick:null},t),e()},t=function(t){var e,n,s;return e=t[0],document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(e),n.select()):window.getSelection?(s=window.getSelection(),n=document.createRange(),n.selectNodeContents(e),s.removeAllRanges(),s.addRange(n)):void 0},e=function(){return n.$element.on("click",function(){return t(n.$element),$(this).trigger("focus").trigger("select"),null!=n.onClick?n.onClick(n):void 0})},{init:s}}(),this.Spellbook.Modules.Share=function(){var t,e,n,s;return e={},s=function(n){return e=$.extend({$element:$(".js-share"),popup:{height:400,width:575,left:0,top:0}},n),t()},t=function(){return e.$element.on("click",function(t){var e,s,r,i;return t.preventDefault(),e=$(this),i=e.attr("href"),r=e.data("share-service"),s=e.data("share-text"),n(r,i,s)})},n=function(t,n,s){var r;switch(r="width="+e.popup.width+", height="+e.popup.height+", top="+e.popup.top+", left="+e.popup.left,t){case"twitter":n="https://twitter.com/share?text="+s+"&url="+n;break;case"facebook":n="https://www.facebook.com/sharer/sharer.php?u="+n,t="facebook-share-dialog";break;case"google":n="https://plus.google.com/share?url="+n}return window.open(n,t,r)},{init:s}}(),this.Spellbook.Modules.ShowPassword=function(){var t,e,n,s;return e={},s=function(s){return e=$.extend({$input:$(".js-showPassword-input"),$toggle:$(".js-showPassword-toggle"),showByDefault:!1},s),t(),e.showByDefault?n():void 0},t=function(){return e.$toggle.on("change",function(){var t;return t=$(this).prop("checked"),t?n():e.$input.attr("type","password")})},n=function(){return e.$input.attr("type","text"),e.$toggle.prop("checked",!0)},{init:s}}(),this.Spellbook.Modules.StateUrls=function(){var t,e,n,s,r,i,o;return r={},o=function(e){return r=$.extend({$element:$(".js-stateUrls"),$link:$(".js-stateUrls-link"),hiddenClass:"is-hidden",activeClass:"is-active",dataAttribute:"state"},e),s(t()),n()},e=function(t){return t.replace(/(<([^>]+)>)/gi,"")},t=function(){var t;return t=window.location.hash?e(window.location.hash):r.$link.first().attr("href")},s=function(t){return r.$element.not(t).addClass(r.hiddenClass),$("[data-"+r.dataAttribute+"="+t+"]").removeClass(r.hiddenClass).addClass(r.activeClass)},n=function(){return r.$link.on("click",function(t){var e,n;return t.preventDefault(),e=$(this),n=e.attr("href"),history.pushState?history.pushState(null,null,n):window.location.hash=n,$(n).length>0?i(e,n):void 0})},i=function(t,e){return r.$link.removeClass(r.activeClass),r.$element.addClass(r.hiddenClass),t.addClass(r.activeClass),$(e).removeClass(r.hiddenClass)},{init:o}}(),this.Spellbook.Modules.Toggle=function(){var t,e,n,s,r,i,o;return r={},o=function(t){return r=$.extend({$element:$(".js-toggle"),proximity:"next",event:"click",toggleClass:"is-hidden",activeClass:"is-active",initialState:null,onClick:null,onMouseover:null,onMouseout:null},t),s()},s=function(){switch(r.event){case"click":return t();case"hover":return e()}},t=function(){return r.$element.on("click",function(t){var e;switch(t.preventDefault(),e=$(this),null!=r.onClick&&r.onClick(r),r.$element.toggleClass(r.activeClass),r.proximity){case"next":return e.next().toggleClass(r.toggleClass);case"prev":return e.prev().toggleClass(r.toggleClass);case"nextParent":return e.parent().next().toggleClass(r.toggleClass);case"prevParent":return e.parent().prev().toggleClass(r.toggleClass);default:return"object"==typeof r.proximity?r.proximity.toggleClass(r.toggleClass):e.find(r.proximity).toggleClass(r.toggleClass)}})},e=function(){return r.initialState&&r.initialState(r),r.$element.on({mouseenter:function(){return n($(this),"on")},mouseleave:function(){return n($(this),"off")}})},n=function(t,e){switch(e){case"on":null!=r.onMouseover&&r.onMouseover(r),t.addClass(r.activeClass);break;case"off":null!=r.onMouseout&&r.onMouseout(r),t.removeClass(r.activeClass)}switch(r.proximity){case"next":return i(t.next());case"prev":return i(t.prev());case"nextParent":return i(t.parent().next());case"prevParent":return i(t.parent().prev());default:return i("object"==typeof r.proximity?r.proximity:t.find(r.proximity))}},i=function(t,e){return null==e&&(e=r.toggleClass),t.hasClass(e)?t.removeClass(e):t.addClass(e)},{init:o}}(),this.Spellbook.Services.autoSubmit=function(t){var e;return e=$.extend({$element:$(".js-autoSubmit")},t),e.$element.on("change",function(){return $(this).closest("form").trigger("submit")})},this.Spellbook.Services.clickOut=function(t){var e;return e=$.extend({$element:$(".js-clickout"),run:null},t),$(document).on("click",function(){return e.run()}),e.$element.on("click",function(t){return t.stopPropagation()})},this.Spellbook.Services.contextMenu=function(t){var e;return e=$.extend({$element:$(".js-contextMenu"),activeClass:"is-active"},t),$(document).on("contextmenu",function(t){return t.preventDefault(),e.$element.css({top:t.pageY+"px",left:t.pageX+"px"}).addClass(e.activeClass)}),$(document).on("click",function(){return e.$element.removeClass(e.activeClass)})},this.Spellbook.Services.escapeOut=function(t){var e;return e=$.extend({run:null},t),$(document).on("keyup",function(t){switch(t.which){case 27:return e.run()}})},this.Spellbook.Services.filter=function(t){var e;return e=$.extend({$element:$(".js-filter"),$item:$(".js-filter-item"),$link:$(".js-filter-link"),$empty:$("<p>There are no items to show.</p>"),activeClass:"is-active",hiddenClass:"is-hidden",dataAttribute:"item"},t),e.$link.on("click",function(t){var n,s,r;return t.preventDefault(),n=$(this),r=n.attr("href").split("#")[1],e.$link.removeClass(e.activeClass),n.toggleClass(e.activeClass),"all"!==r?(e.$item.addClass(e.hiddenClass),s=$("[data-"+e.dataAttribute+"="+r+"]"),s.length>0?s.removeClass(e.hiddenClass):e.$element.append(e.$empty)):e.$item.removeClass(e.hiddenClass)})},this.Spellbook.Services.fixOrphanWords=function(t){var e;return e=$.extend({$element:$(".js-orphan")},t),e.$element.each(function(){var t,e,n,s,r,i;for(t=$(this),i=t.text().split(" "),e="",n=s=0,r=i.length-1;r>=0?r>=s:s>=r;n=r>=0?++s:--s)e+=i[n],e+=n===i.length-2?"&nbsp;":n===i.length-1?"":" ";return t.html(e)})},this.Spellbook.Services.formPreview=function(t){var e;return e=$.extend({$element:$(".js-formPreview-input"),idName:"formPreview",dataAttr:"preview",onKeyup:null},t),e.$element.on("keyup",function(){var t,n,s;return t=$(this),s=t.val(),n=t.data(e.dataAttr),$("#"+e.idName+"-"+n).text(s),null!=e.onKeyup?e.onKeyup(e):void 0})},this.Spellbook.Services.limiter=function(t){var e,n;return n=$.extend({$element:$(".js-limiter-element"),$toggle:$(".js-limiter-toggle"),hiddenClass:"is-hidden",limit:5},t),e=n.$element.length,e>n.limit?(n.$element.not(":lt("+n.limit+")").addClass(n.hiddenClass),n.$toggle.on("click",function(t){return t.preventDefault(),$(this).remove(),n.$element.removeClass(n.hiddenClass)})):n.$toggle.remove()},this.Spellbook.Services.loader=function(t){var e;return e=$.extend({$element:$(".js-loader-element"),$toggle:$(".js-loader-toggle"),$spinner:$("<span></span>"),$overlay:$("<div></div>"),spinnerClass:"loader",overlayClass:"loader-overlay",loadingClass:"is-loading"},t),e.$toggle.on("click",function(){return e.$element.toggleClass(e.loadingClass),e.$element.append(e.$spinner),e.$spinner.addClass(e.spinnerClass),e.$element.append(e.$overlay),e.$overlay.addClass(e.overlayClass)})},this.Spellbook.Services.prefixClasses=function(t){var e;return e=$.extend({$element:$(".js-prefixClasses"),query:"[ class ]",prefix:"prefix"},t),e.$element.find(e.query).each(function(){var t,n,s,r,i,o;for(i=this,t=i.className.split(" "),o="",s=0,r=t.length;r>s;s++)n=t[s],o=o+" "+e.prefix+"-"+n;return i.className=o})},this.Spellbook.Services.scrollTo=function(t){var e;return e=$.extend({$element:$(".js-scrollTo"),speed:250},t),e.$element.on("click",function(t){var n;return t.preventDefault(),n=e.$element.attr("href"),$("body, html").animate({scrollTop:parseInt($(n).offset().top)},e.speed)})},this.Spellbook.Services.scrollTrigger=function(t){var e,n,s;return s=$.extend({$element:$(".js-scrollTrigger"),scrollPadding:400,activeClass:"is-active"},t),n=$(window).scrollTop(),s.$element.offset().top>=0&&(e=n-s.$element.offset().top-s.scrollPadding),!s.$element.hasClass(s.activeClass)&&e?s.$element.addClass(s.activeClass):void 0},this.Spellbook.Services.shortcut=function(t){var e;return e=$.extend({$element:$("[data-shortcut]"),dataAttribute:"shortcut",keyCodes:Spellbook.Helpers.keyCodes},t),e.$element.each(function(){var t;return t=e.keyCodes[$(this).data(e.dataAttribute)],$(document).on("keyup",function(e){return function(n){var s,r;return s=$(e),r=n.target.tagName.toLowerCase(),"input"!==r&&"textarea"!==r&&n.which===t&&(s.trigger("focus").trigger("click"),"a"===s.prop("tagName").toLowerCase())?window.location=s.attr("href"):void 0}}(this))})},this.Spellbook.Classes.ClassName=function(){function t(t){this.options=t,this.init()}return t.prototype._settings={},t.prototype.init=function(){return this._settings=$.extend({$element:$(".js-element")},this.options),this._setEventHandlers()},t.prototype._setEventHandlers=function(){},t}(),this.Spellbook.Namespace.functionName=function(t){return t.$element.on("click",function(e){return e.preventDefault(),$(this).toggleClass(t.className)})},this.Spellbook.Helpers.helperName=function(){},this.Spellbook.Modules.ModuleName=function(){var t,e,n;return e={},n=function(n){return e=$.extend({$element:$(".js-element")},n),t()},t=function(){},{init:n}}(),this.Spellbook.Services.serviceName=function(t){var e;return e=$.extend({$element:$(".js-element")},t)};