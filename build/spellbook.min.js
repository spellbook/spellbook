this.Spellbook={},this.Spellbook.Globals={},this.Spellbook.Classes={},this.Spellbook.Helpers={},this.Spellbook.Modules={},this.Spellbook.Services={},this.Spellbook.Inbox={},this.Spellbook.Classes.Dematerialize=function(){function e(e){this.options=e,this._settings=$.extend({$element:$(".js-dematerialize"),$trigger:$(".js-dematerialize-trigger"),itemTitle:"hidden_element",hiddenClass:"is-hidden"},this.options)}return e._settings={},e._item="",e.prototype.init=function(){return this._setEventHandlers(),this._setInitialState()},e.prototype._setEventHandlers=function(){return this._settings.$trigger instanceof jQuery?this._settings.$trigger.on("click",function(e){return function(t){return t.preventDefault(),e._toggleState()}}(this)):this._toggleStateViaKey()},e.prototype._setInitialState=function(){return this._item=localStorage.getItem(this._settings.itemTitle),"true"!==this._item?this._settings.$element.removeClass(this._settings.hiddenClass):void 0},e.prototype._toggleState=function(){return this._settings.$element.hasClass(this._settings.hiddenClass)?(this._settings.$element.removeClass(this._settings.hiddenClass),this._item=localStorage.removeItem(this._settings.itemTitle)):(this._settings.$element.addClass(this._settings.hiddenClass),this._item=localStorage.setItem(this._settings.itemTitle,"true"))},e.prototype._toggleStateViaKey=function(){return $(document).on("keyup",function(e){return function(t){var n;switch(n=t.target.tagName.toLowerCase(),t.which){case e._settings.$trigger:if("input"!==n&&"textarea"!==n)return e._toggleState()}}}(this))},e}(),this.Spellbook.Classes.Dispatcher=function(){function e(e){this.options=e,this.init()}return e.prototype._settings={},e.prototype.init=function(){return this._settings=$.extend({$element:$(".js-dispatcher"),dataAttr:"dispatcher-page",events:[]},this.options),this.dispatch()},e.prototype.dispatch=function(e){var t,n,s,r,i;if(null==e&&(e=null),s=this._getCurrentPage(),!s)return!1;if(null==e){for(r=this._settings.events,i=[],t=0,n=r.length;n>t;t++){switch(e=r[t],e.page){case s:e.run();break;case"all":e.run()}e.match&&s.match(e.match)?i.push(e.run()):i.push(void 0)}return i}switch(e.page){case s:return e.run();case"all":return e.run()}},e.prototype._getCurrentPage=function(){return this._settings.$element.data(this._settings.dataAttr)},e}();var bind=function(e,t){return function(){return e.apply(t,arguments)}};this.Spellbook.Classes.DrawSvg=function(){function e(e){this.options=e,this.draw=bind(this.draw,this),this.init()}return e.prototype._settings={},e.prototype._paths=[],e.prototype._lengths=[],e.prototype._currentFrame=0,e.prototype._totalFrames=60,e.prototype._handle=0,e.prototype._progress=0,e.prototype.init=function(){return this._settings=$.extend({$element:$(".js-drawSvg"),prefix:"path"},this.options),this._setStorage()},e.prototype._setStorage=function(){var e,t,n,s,r,i;for(s=this._settings.$element.find("path[id]").length,i=[],t=e=0,r=s;r>=0?r>e:e>r;t=r>=0?++e:--e)this._paths[t]=document.getElementById(this._settings.prefix+"-"+t),n=this._paths[t].getTotalLength(),this._lengths[t]=n,this._paths[t].style.strokeDasharray=n+" "+n,i.push(this._paths[t].style.strokeDashoffset=n);return i},e.prototype._setStroke=function(){var e,t,n,s;for(s=[],t=e=0,n=this._paths.length;n>=0?n>e:e>n;t=n>=0?++e:--e)s.push(this._paths[t].style.strokeDashoffset=Math.floor(this._lengths[t]*(1-this._progress)));return s},e.prototype.draw=function(){return this._progress=this._currentFrame/this._totalFrames,this._progress>1?window.cancelAnimationFrame(this._handle):(this._currentFrame++,this._setStroke(),this._handle=window.requestAnimationFrame(this.draw))},e}(),this.Spellbook.Classes.FormValidator=function(){function e(e){this.options=e,this.init()}return e.prototype._settings={},e.prototype._input=null,e.prototype._errors=[],e.prototype._validators=["required"],e.prototype.init=function(){return this._settings=$.extend({$element:$(".js-formValidator"),$input:$(".js-formValidator-input"),$submit:$(".js-formValidator-submit"),messageClass:"js-formValidator-message",errorClass:"is-invalid",delimiter:"|",dataAttr:"validate",showMessage:!0,onError:null,onSuccess:null},this.options),this._setEventHandlers()},e.prototype._setEventHandlers=function(){return this._settings.$element.on("submit",function(e){return function(t){return e._validateAllFields()?void 0:t.preventDefault()}}(this)),this._settings.$input.on("keyup",function(e){return function(t){return e._input=$(t.currentTarget),e.validate(e._input)}}(this))},e.prototype._validateAllFields=function(){return this._settings.$input.each(function(e){return function(t,n){return e._input=$(n),e.validate(e._input)}}(this)),0===this._errors.length?!0:!1},e.prototype.validate=function(e){var t,n,s,r,i;if(r=this._parseValidators(e.data(this._settings.dataAttr)),this._element=e,Array.isArray(r)){for(i=[],t=0,s=r.length;s>t;t++)n=r[t],i.push(this._matchValidators(n));return i}return this._matchValidators(r)},e.prototype._matchValidators=function(e){switch(e){case"required":return this._validateRequired()?this._setValidationState("error","The field is required."):this._setValidationState("success")}},e.prototype._setValidationState=function(e,t){var n,s;switch(e){case"error":return this._setError(t),this._setInputState(t),"function"==typeof(n=this._settings).onError?n.onError(this._settings):void 0;case"success":return this._removeError(),this._removeInputState(),"function"==typeof(s=this._settings).onSuccess?s.onSuccess(this._settings):void 0}},e.prototype._parseValidators=function(e){var t,n,s,r,i;if(r=[],i=e.split(this._settings.delimiter),i.length>1){for(t=0,n=i.length;n>t;t++)s=i[t],r.push(s);return r}return e},e.prototype._isValidator=function(e){return-1!==this._validators.indexOf(e)},e.prototype._validateRequired=function(){return""===this._input.val()?!0:!1},e.prototype._setError=function(e){return this._errors.push({element:this._input.attr("name"),message:e})},e.prototype._removeError=function(){var e;return e=this._errors.indexOf(this._input),this._errors.splice(e,1)},e.prototype._setInputState=function(e){return this._removeInputState(),this._input.addClass(this._settings.errorClass),this._settings.showMessage?this._input.after("<p class='"+this._settings.messageClass+"'>"+e+"</p>"):void 0},e.prototype._removeInputState=function(){return this._input.removeClass(this._settings.errorClass),this._settings.showMessage?this._input.next("."+this._settings.messageClass).remove():void 0},e}(),this.Spellbook.Classes.KeyboardEvents=function(){function e(e){this.options=e,this.init()}return e.prototype._settings={},e.prototype.init=function(){return this._settings=$.extend({events:[]},this.options),this.emit()},e.prototype._match=function(e){return $(document).on("keyup",function(t){return function(n){switch(t._getKeyCode(n)){case e.key:return e.run()}}}(this))},e.prototype._getKeyCode=function(e){var t;return e=e||window.event,t=e.keyCode||e.which},e.prototype.emit=function(e){var t,n,s,r;if(null==e&&(e=null),null==e){for(s=this._settings.events,r=[],t=0,n=s.length;n>t;t++)e=s[t],r.push(this._match(e));return r}return this._match(e)},e}(),this.Spellbook.Classes.QueryParams=function(){function e(e){this.options=e,this.init()}return e.prototype.params={},e.prototype.variables=[],e.prototype._settings={},e.prototype.init=function(){return this._settings=$.extend({url:null},this.options),this._parseQueryString(this._settings.url),this._sortParams()},e.prototype._parseQueryString=function(e){var t;return t=e?e.split("?")[1]:window.location.search.substring(1),this.variables=t.split("&")},e.prototype._sortParams=function(){var e,t,n,s,r,i;for(r=this.variables,i=[],e=0,t=r.length;t>e;e++)s=r[e],n=s.split("="),void 0!==n[1]?i.push(this.params[n[0]]=n[1]):i.push(void 0);return i},e.prototype.allParams=function(){return this.params},e.prototype.matchParamKey=function(e){var t,n,s;n=this.params;for(t in n)if(s=n[t],e===t)return!0;return!1},e.prototype.matchParamValue=function(e){var t,n,s;n=this.params;for(t in n)if(s=n[t],e===s)return!0;return!1},e}(),this.Spellbook.Classes.Singleton=function(){function e(){}return e.prototype._instance=null,e.getInstance=function(){return null!=this._instance?this._instance:this._instance=function(e,t,n){n.prototype=e.prototype;var s=new n,r=e.apply(s,t);return Object(r)===r?r:s}(this,arguments,function(){})},e}(),this.Spellbook.Helpers.isBlank=function(e){return 0===e.trim().length?!0:!1},this.Spellbook.Helpers.keyCodes={enter:13,shift:16,ctrl:17,alt:18,esc:27,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,comma:188,slash:191,backslash:220,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90},this.Spellbook.Helpers.randomizer=function(e){var t;return t=Math.floor(Math.random()*e.length),e[t]},this.Spellbook.Helpers.sanitize=function(e){return e.replace(/(<([^>]+)>)/gi,"")},this.Spellbook.Helpers.slugify=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},this.Spellbook.Helpers.uid=function(e){var t;for(null==e&&(e=10),t="";t.length<e;)t+=Math.random().toString(36).substr(2);return t.substr(0,e)},this.Spellbook.Modules.AutoDuplicateInput=function(){var e,t,n,s,r,i,o,a,l,u,c;return a={},e=0,n=null,l={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},c=function(e){return a=$.extend({$element:$(".js-autoDuplicateInput"),$container:$(".js-autoDuplicateInput-container"),clonedDataAttribute:"cloned",validateDataAttribute:"validate",invalidClass:"is-invalid",validClass:"is-valid",onDuplicate:null,onInvalid:null,onValid:null},e),i()},i=function(){return a.$element.on("keyup",function(s){return s.preventDefault(),n=$(this),r()?(o("valid"),"function"==typeof a.onValid&&a.onValid(a),"true"!==n.data("cloned")&&t(),"function"==typeof a.onDuplicate?a.onDuplicate(a,e):void 0):(o("invalid"),"function"==typeof a.onInvalid?a.onInvalid(a):void 0)})},s=function(){return n.data(a.validateDataAttribute)},r=function(){var e;return e=s(n),l[""+e].test(n.val())},t=function(){return++e,n.data(a.clonedDataAttribute,"true").clone(!0).appendTo(a.$container).removeClass(a.validClass).val("").data(a.clonedDataAttribute,"")},o=function(e){switch(e){case"invalid":return n.removeClass(a.validClass).addClass(a.invalidClass);case"valid":return n.removeClass(a.invalidClass).addClass(a.validClass)}},u=function(){return e},{init:c,getCount:u}}(),this.Spellbook.Modules.CharacterCounter=function(){var e,t,n,s,r;return n={},e=0,r=function(e){return n=$.extend({$element:$(".js-characterCounter"),$label:$(".js-characterCounter-label"),$number:$(".js-characterCounter-number"),errorClass:"is-error",successClass:"is-success",minChars:0,maxChars:140,onMinPreceeded:null,onMaxExceeded:null,onConditionsMet:null},e),t()},t=function(){return n.$element.on("keyup",function(t){var r;return t.preventDefault(),r=$(this),e=r.val().length,n.$number.text(e),e>n.maxChars?(s(r,"error"),"function"==typeof n.onMaxExceeded?n.onMaxExceeded(n):void 0):e<n.minChars?(s(r,"error"),"function"==typeof n.onMinPreceeded?n.onMinPreceeded(n):void 0):(s(r,"success"),"function"==typeof n.onConditionsMet?n.onConditionsMet(n):void 0)})},s=function(e,t){switch(t){case"error":return e.removeClass(n.successClass),n.$label.removeClass(n.successClass),e.addClass(n.errorClass),n.$label.addClass(n.errorClass);case"success":return e.removeClass(n.errorClass),n.$label.removeClass(n.errorClass),e.addClass(n.successClass),n.$label.addClass(n.successClass)}},{init:r}}(),this.Spellbook.Modules.EqualHeights=function(){var e,t,n,s,r,i;return s={},e=[],r=null,i=function(e){return s=$.extend({$element:$(".js-equalHeights")},e),n(),t()},n=function(){var t;return s.$element.css("height","auto"),s.$element.each(function(){return e.push($(this).height())}),t=Math.max.apply(Math,e),s.$element.css("height",t)},t=function(){return $(window).on("resize",function(){return clearTimeout(r),r=setTimeout(n,250)})},{init:i}}(),this.Spellbook.Modules.HeadingLinks=function(){var e,t,n,s;return t={},s=function(n){return t=$.extend({$element:$("h1, h2, h3, h4, h5"),anchorClass:"anchor"},n),e()},n=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/\s+/g,"-")},e=function(){return t.$element.each(function(){var e,s;return e=$(this),s=n(e.text()),e.attr("id",s),e.prepend("<a class='"+t.anchorClass+"' href='#"+s+"'>#</a>")})},{init:s}}(),this.Spellbook.Modules.KeyboardEvents=function(){var e,t,n,s,r;return n={},r=function(e){return n=$.extend({events:[]},e),s()},t=function(t){return $(document).on("keyup",function(n){switch(e(n)){case t.key:return t.run()}})},e=function(e){var t;return e=e||window.event,t=e.keyCode||e.which},s=function(e){var s,r,i,o;if(null==e&&(e=null),null==e){for(i=n.events,o=[],s=0,r=i.length;r>s;s++)e=i[s],o.push(t(e));return o}return t(e)},{init:r,emit:s}}(),this.Spellbook.Modules.LiveSearch=function(){var e,t,n,s,r,i,o,a,l;return a={},i="",l=function(e){return a=$.extend({$element:$(".js-search"),$query:$(".js-search-query"),$container:$(".js-search-container"),itemNode:".js-search-item",hiddenClass:"is-hidden",emptyMessage:!0,emptyNode:".js-search-empty",onClear:null,onEmpty:null,onFound:null,onKeyup:null},e),o()},o=function(){return a.$element.on("keyup",function(t){return i=$(this).val(),"function"==typeof a.onKeyup&&a.onKeyup(a),""===i&&($(a.itemNode).removeClass(a.hiddenClass),e(),"function"==typeof a.onClear&&a.onClear(a)),e(),r()})},r=function(){return a.$query.each(function(e){var t;return t=$(this),s(t)?t.closest(a.itemNode).addClass(a.hiddenClass):(t.closest(a.itemNode).removeClass(a.hiddenClass),"function"==typeof a.onFound?a.onFound(a):void 0)}),t()},e=function(){return a.emptyMessage&&$(a.emptyNode).length>0?$(a.emptyNode).remove():void 0},t=function(){var e;return n()?(a.emptyMessage&&(e=a.emptyNode.replace(".","")),$("<p class='"+e+"'>\n  There are no results matching '"+i+"'.\n</p>").insertAfter(a.$container),"function"==typeof a.onEmpty?a.onEmpty(a):void 0):void 0},s=function(e){return e.text().search(new RegExp(i,"i"))<0},n=function(){return $(a.itemNode+"."+a.hiddenClass).length===$(a.itemNode).length},{init:l}}(),this.Spellbook.Modules.Modal=function(){var e,t,n,s,r,i,o,a,l;return t=null,e=null,i={},a=function(e){return i=$.extend({$trigger:$(".js-modal-trigger"),$close:$(".js-modal-close"),dataAttribute:"modal",backdropClass:"modal-backdrop",activeClass:"is-active",inactiveClass:"is-inactive",activeBodyClass:"is-modal-active"},e),r(),this},l=function(e,r,a,l){switch(null==a&&(a=!1),null==l&&(l=null),t=e,r){case"open":e.addClass(i.activeClass),$("body").addClass(i.activeBodyClass);break;case"close":e.removeClass(i.activeClass),$("body").removeClass(i.activeBodyClass),n()}return a||o(r),l&&l(),s()},o=function(t){switch(t){case"open":return $("<div class="+i.backdropClass+"></div>").appendTo($("body")),e=$("."+i.backdropClass),setTimeout(function(){return e.addClass(i.activeClass)},25);case"close":return e.removeClass(i.activeClass),setTimeout(function(){return e.remove()},500)}},r=function(){return i.$trigger.on("click",function(e){var n;return e.preventDefault(),n=$(this).data(i.dataAttribute),t=$(n),l(t,"open")})},s=function(){return i.$close.on("click",function(e){return e.preventDefault(),l(t,"close")}),e.on("click",function(e){return l(t,"close")}),$(document).on("keydown",function(e){switch(e.which){case 27:return l(t,"close")}})},n=function(){return i.$close.off("click"),$(document).off("keydown")},{init:a,trigger:l}}(),this.Spellbook.Modules.QuantityInput=function(){var e,t,n,s,r,i,o;return n={},i=null,o=function(s){return n=$.extend({$element:$(".js-quantityInput"),$field:$(".js-quantityInput-field"),$increase:$(".js-quantityInput-increase"),$decrease:$(".js-quantityInput-decrease"),$target:$(".js-quantityInput-target"),targetBaseValue:29,targetValuePrefix:"$",minValue:1,maxValue:100,onIncrease:null,onDecrease:null,onTargetUpdate:null},s),t(),e()},t=function(){return i=parseInt(n.$element.val())},e=function(){return n.$element.on("keyup",function(e){return t(),isNaN(i)||i<n.minValue||i>n.maxValue?void 0:r()}),n.$increase.on("click",function(e){return e.preventDefault(),i>=n.maxValue||r("up"),"function"==typeof n.onIncrease?n.onIncrease(n):void 0}),n.$decrease.on("click",function(e){return e.preventDefault(),i<=n.minValue||r("down"),"function"==typeof n.onDecrease?n.onDecrease(n):void 0})},r=function(e){switch(null==e&&(e=""),e){case"up":n.$element.val(++i);break;case"down":n.$element.val(--i);break;default:n.$element.val(i)}return s(),"function"==typeof n.onTargetUpdate?n.onTargetUpdate(n):void 0},s=function(){var e;return e=i*n.targetBaseValue,n.$target.text(""+n.targetValuePrefix+e)},{init:o}}(),this.Spellbook.Modules.SaveProgress=function(){var e,t,n,s,r,i;return s={},i=function(e){return s=$.extend({$element:$(".js-saveProgress"),$container:$(".js-saveProgress-container"),dataAttribute:"saveprogress"},e),t(),n()},e=function(e){return e.find(s.$element).each(function(){var e;return e=$(this).data(s.dataAttribute),localStorage.removeItem(e)})},t=function(){return s.$element.each(function(){var e,t,n;return e=$(this),t=e.data(s.dataAttribute),n=localStorage.getItem(t),null!==n?e.val(n):void 0})},n=function(){return s.$element.on("input",function(){var e,t,n;return e=$(this),t=e.data(s.dataAttribute),n=e.val(),r(t,n)}),s.$container.on("submit",function(t){return e($(this))})},r=function(e,t){return localStorage.setItem(e,t)},{init:i}}(),this.Spellbook.Modules.selectText=function(){var e,t,n,s;return n={},s=function(e){return n=$.extend({$element:$(".js-selectText"),onClick:null},e),t()},e=function(e){var t,n,s;return t=e[0],document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(t),n.select()):window.getSelection?(s=window.getSelection(),n=document.createRange(),n.selectNodeContents(t),s.removeAllRanges(),s.addRange(n)):void 0},t=function(){return n.$element.on("click",function(){return e(n.$element),$(this).trigger("focus").trigger("select"),"function"==typeof n.onClick?n.onClick(n):void 0})},{init:s}}(),this.Spellbook.Modules.Share=function(){var e,t,n,s;return t={},s=function(n){return t=$.extend({$element:$(".js-share"),popup:{height:400,width:575,left:0,top:0}},n),e()},e=function(){return t.$element.on("click",function(e){var t,s,r,i;return e.preventDefault(),t=$(this),i=t.attr("href"),r=t.data("share-service"),s=t.data("share-text"),n(r,i,s)})},n=function(e,n,s){var r;switch(r="width="+t.popup.width+", height="+t.popup.height+", top="+t.popup.top+", left="+t.popup.left,e){case"twitter":n="https://twitter.com/share?text="+s+"&url="+n;break;case"facebook":n="https://www.facebook.com/sharer/sharer.php?u="+n,e="facebook-share-dialog";break;case"google":n="https://plus.google.com/share?url="+n}return window.open(n,e,r)},{init:s}}(),this.Spellbook.Modules.ShowPassword=function(){var e,t,n,s;return t={},s=function(s){return t=$.extend({$input:$(".js-showPassword-input"),$toggle:$(".js-showPassword-toggle"),showByDefault:!1},s),e(),t.showByDefault?n():void 0},e=function(){return t.$toggle.on("change",function(e){var s;return s=$(this).prop("checked"),s?n():t.$input.attr("type","password")})},n=function(){return t.$input.attr("type","text"),t.$toggle.prop("checked",!0)},{init:s}}(),this.Spellbook.Modules.StateUrls=function(){var e,t,n,s,r,i,o;return r={},o=function(t){return r=$.extend({$element:$(".js-stateUrls"),$link:$(".js-stateUrls-link"),hiddenClass:"is-hidden",activeClass:"is-active",dataAttribute:"state"},t),s(e()),n()},t=function(e){return e.replace(/(<([^>]+)>)/gi,"")},e=function(){var e;return e=window.location.hash?t(window.location.hash):r.$link.first().attr("href")},s=function(e){return r.$element.not(e).addClass(r.hiddenClass),$("[data-"+r.dataAttribute+"="+e+"]").removeClass(r.hiddenClass).addClass(r.activeClass)},n=function(){return r.$link.on("click",function(e){var t,n;return e.preventDefault(),t=$(this),n=t.attr("href"),history.pushState?history.pushState(null,null,n):window.location.hash=n,$(n).length>0?i(t,n):void 0})},i=function(e,t){return r.$link.removeClass(r.activeClass),r.$element.addClass(r.hiddenClass),e.addClass(r.activeClass),$(t).removeClass(r.hiddenClass)},{init:o}}(),this.Spellbook.Modules.Toggle=function(){var e,t,n,s,r,i,o;return r={},o=function(e){return r=$.extend({$element:$(".js-toggle"),proximity:"next",event:"click",toggleClass:"is-hidden",activeClass:"is-active",initialState:null,onClick:null,onMouseover:null,onMouseout:null},e),s()},s=function(){switch(r.event){case"click":return e();case"hover":return t()}},e=function(){return r.$element.on("click",function(e){var t;switch(e.preventDefault(),t=$(this),"function"==typeof r.onClick&&r.onClick(r),r.$element.toggleClass(r.activeClass),r.proximity){case"next":return t.next().toggleClass(r.toggleClass);case"prev":return t.prev().toggleClass(r.toggleClass);case"nextParent":return t.parent().next().toggleClass(r.toggleClass);case"prevParent":return t.parent().prev().toggleClass(r.toggleClass);default:return"object"==typeof r.proximity?r.proximity.toggleClass(r.toggleClass):t.find(r.proximity).toggleClass(r.toggleClass)}})},t=function(){return r.initialState&&r.initialState(r),r.$element.on({mouseenter:function(){return n($(this),"on")},mouseleave:function(){return n($(this),"off")}})},n=function(e,t){switch(t){case"on":"function"==typeof r.onMouseover&&r.onMouseover(r),e.addClass(r.activeClass);break;case"off":"function"==typeof r.onMouseout&&r.onMouseout(r),e.removeClass(r.activeClass)}switch(r.proximity){case"next":return i(e.next());case"prev":return i(e.prev());case"nextParent":return i(e.parent().next());case"prevParent":return i(e.parent().prev());default:return i("object"==typeof r.proximity?r.proximity:e.find(r.proximity))}},i=function(e,t){return null==t&&(t=r.toggleClass),e.hasClass(t)?e.removeClass(t):e.addClass(t)},{init:o}}(),this.Spellbook.Services.autoSubmit=function(e){var t;return t=$.extend({$element:$(".js-autoSubmit")},e),t.$element.on("change",function(){return $(this).closest("form").trigger("submit")})},this.Spellbook.Services.clickOut=function(e){var t;return t=$.extend({$element:$(".js-clickout"),run:null},e),$(document).on("click",function(){return t.run()}),t.$element.on("click",function(e){return e.stopPropagation()})},this.Spellbook.Services.contextMenu=function(e){var t;return t=$.extend({$element:$(".js-contextMenu"),activeClass:"is-active"},e),$(document).on("contextmenu",function(e){return e.preventDefault(),t.$element.css({top:e.pageY+"px",left:e.pageX+"px"}).addClass(t.activeClass)}),$(document).on("click",function(e){return t.$element.removeClass(t.activeClass)})},this.Spellbook.Services.escapeOut=function(e){var t;return t=$.extend({run:null},e),$(document).on("keyup",function(e){switch(e.which){case 27:return t.run()}})},this.Spellbook.Services.filter=function(e){var t;return t=$.extend({$element:$(".js-filter"),$item:$(".js-filter-item"),$link:$(".js-filter-link"),$empty:$("<p>There are no items to show.</p>"),activeClass:"is-active",hiddenClass:"is-hidden",dataAttribute:"item"},e),t.$link.on("click",function(e){var n,s,r;return e.preventDefault(),n=$(this),r=n.attr("href").split("#")[1],t.$link.removeClass(t.activeClass),n.toggleClass(t.activeClass),"all"!==r?(t.$item.addClass(t.hiddenClass),s=$("[data-"+t.dataAttribute+"="+r+"]"),s.length>0?s.removeClass(t.hiddenClass):t.$element.append(t.$empty)):t.$item.removeClass(t.hiddenClass)})},this.Spellbook.Services.fixOrphanWords=function(e){var t;return t=$.extend({$element:$(".js-orphan")},e),t.$element.each(function(){var e,t,n,s,r,i;for(e=$(this),i=e.text().split(" "),t="",n=s=0,r=i.length-1;r>=0?r>=s:s>=r;n=r>=0?++s:--s)t+=i[n],t+=n===i.length-2?"&nbsp;":n===i.length-1?"":" ";return e.html(t)})},this.Spellbook.Services.formPreview=function(e){var t;return t=$.extend({$element:$(".js-formPreview-input"),idName:"formPreview",dataAttr:"preview",onKeyup:null},e),t.$element.on("keyup",function(e){var n,s,r;return n=$(this),r=n.val(),s=n.data(t.dataAttr),$("#"+t.idName+"-"+s).text(r),null!=t.onKeyup?t.onKeyup(t):void 0})},this.Spellbook.Services.limiter=function(e){var t,n;return n=$.extend({$element:$(".js-limiter-element"),$toggle:$(".js-limiter-toggle"),hiddenClass:"is-hidden",limit:5},e),t=n.$element.length,t>n.limit?(n.$element.not(":lt("+n.limit+")").addClass(n.hiddenClass),n.$toggle.on("click",function(e){return e.preventDefault(),$(this).remove(),n.$element.removeClass(n.hiddenClass)})):n.$toggle.remove()},this.Spellbook.Services.loader=function(e){var t;return t=$.extend({$element:$(".js-loader-element"),$toggle:$(".js-loader-toggle"),$spinner:$("<span></span>"),$overlay:$("<div></div>"),spinnerClass:"loader",overlayClass:"loader-overlay",loadingClass:"is-loading"},e),t.$toggle.on("click",function(e){return t.$element.toggleClass(t.loadingClass),t.$element.append(t.$spinner),t.$spinner.addClass(t.spinnerClass),t.$element.append(t.$overlay),t.$overlay.addClass(t.overlayClass)})},this.Spellbook.Services.prefixClasses=function(e){var t;return t=$.extend({$element:$(".js-prefixClasses"),query:"[ class ]",prefix:"prefix"},e),t.$element.find(t.query).each(function(){var e,n,s,r,i,o;for(i=this,e=i.className.split(" "),o="",s=0,r=e.length;r>s;s++)n=e[s],o=o+" "+t.prefix+"-"+n;return i.className=o})},this.Spellbook.Services.scrollTo=function(e){var t;return t=$.extend({$element:$(".js-scrollTo"),speed:250},e),t.$element.on("click",function(e){var n;return e.preventDefault(),n=t.$element.attr("href"),$("body, html").animate({scrollTop:parseInt($(n).offset().top)},t.speed)})},this.Spellbook.Services.scrollTrigger=function(e){var t,n,s;return s=$.extend({$element:$(".js-scrollTrigger"),scrollPadding:400,activeClass:"is-active"},e),n=$(window).scrollTop(),s.$element.offset().top>=0&&(t=n-s.$element.offset().top-s.scrollPadding),!s.$element.hasClass(s.activeClass)&&t?s.$element.addClass(s.activeClass):void 0},this.Spellbook.Services.shortcut=function(e){var t;return t=$.extend({$element:$("[data-shortcut]"),dataAttribute:"shortcut",keyCodes:Spellbook.Helpers.keyCodes},e),t.$element.each(function(){var e;return e=t.keyCodes[$(this).data(t.dataAttribute)],$(document).on("keyup",function(t){return function(n){var s,r;return s=$(t),r=n.target.tagName.toLowerCase(),"input"!==r&&"textarea"!==r&&n.which===e&&(s.trigger("focus").trigger("click"),"a"===s.prop("tagName").toLowerCase())?window.location=s.attr("href"):void 0}}(this))})},this.Spellbook.Classes.ClassName=function(){function e(e){this.options=e,this.init()}return e.prototype._settings={},e.prototype.init=function(){return this._settings=$.extend({$element:$(".js-element")},this.options),this._setEventHandlers()},e.prototype._setEventHandlers=function(){},e}(),this.Spellbook.Namespace.functionName=function(e){return e.$element.on("click",function(t){return t.preventDefault(),$(this).toggleClass(e.className)})},this.Spellbook.Helpers.helperName=function(e){},this.Spellbook.Modules.ModuleName=function(){var e,t,n;return t={},n=function(n){return t=$.extend({$element:$(".js-element")},n),e()},e=function(){},{init:n}}(),this.Spellbook.Services.serviceName=function(e){var t;return t=$.extend({$element:$(".js-element")},e)};